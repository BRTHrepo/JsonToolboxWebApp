<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>About</title>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet" />
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/client.css" />

</head>

<body>

<nav class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
            <a class="navbar-brand" href="#"><i class="fas fa-toolbox"></i> JsonToolboxWebApp</a>
        </div>

        
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav"><li><a href="./index.html">Home</a></li><li class="active"><a href="./about.html">About</a></li></ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="https://websharper.com">websharper.com</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="container">
    <h1>JsonToolboxWebApp</h1>
<h2>Project Overview</h2>
<p>JsonToolboxWebApp is a web application designed to process, validate, and compare JSON files. Built with F# and WebSharper, the application provides a user-friendly interface for JSON analysis.</p>
<h2>Screenshots</h2>
<h3>1. Select File</h3>
<p><img src="images/selectFile.png" alt="Select File" /></p>
<h3>2. Select Target</h3>
<p><img src="images/target.png" alt="Select Target" /></p>
<h3>3. Select Filter</h3>
<p><img src="images/filter.png" alt="Select Filter" /></p>
<h3>4. Result Section</h3>
<p><img src="images/result.png" alt="Result Section" /></p>
<h3>5.  Key Search</h3>
<h2>Motivation</h2>
<p>The JsonToolboxWebApp was created to facilitate the comparison of JSON files and identify differences between them. The application serves as a foundation for further development, with potential features such as JSON editing, merging, and exporting comparison results for broader use cases.</p>
<h2>Features</h2>
<h3>1. JSON Traverser</h3>
<ul>
<li>Recursively navigates through JSON structures.</li>
<li>Handles nested objects and arrays efficiently.</li>
</ul>
<h3>2. JSON Validator</h3>
<ul>
<li>Validates the syntax and structure of JSON files.</li>
<li>Provides meaningful error messages for invalid JSON inputs.</li>
</ul>
<h3>3. JSON Comparator</h3>
<ul>
<li>Compares two JSON files recursively.</li>
<li>Identifies differences in keys, values, and array sizes.</li>
<li>Outputs discrepancies in a structured format (<code>UnionDictionary</code>).</li>
</ul>
<h3>4. Customizable Output</h3>
<ul>
<li>
Allows filtering of comparison results based on the <code>same</code> property:
<ul>
<li>Show all results.</li>
<li>Show only identical entries (<code>same = true</code>).</li>
<li>Show only differing entries (<code>same = false</code>).</li>
</ul>
</li>
<li>Dynamically updates the output when the filter changes.</li>
</ul>
<h3>5. JavaScript Object Null Handling</h3>
<ul>
<li>Ensures that <code>null</code> values are not misclassified as objects during traversal.</li>
<li>Added explicit checks to correctly identify and process <code>null</code> values at all recursive levels.</li>
</ul>
<h3>6. Key Filter Search Feature</h3>
<p>Overview
The Key Filter Search feature allows users to filter the comparison results by entering a specific key. If a key is provided, the application will display only the comparison results related to that key. This functionality ensures a more focused analysis of JSON differences.</p>
<p>How It Works
1. Enter a key in the "Search by Key" input field.
2. The results will dynamically update to show only entries matching the provided key.
3. If no key is entered, the default filtering (e.g., "Same", "Different", or "All") will apply.</p>
<p>Example Use Case
- <strong>Scenario</strong>: You have two large JSON files and want to compare only the values associated with the key <code>ticketTypes</code>.
- <strong>Steps</strong>:
1. Enter <code>ticketTypes</code> in the search field.
2. View the filtered results showing only differences or similarities for <code>ticketTypes</code>.</p>
<p>Notes
- The search is case-sensitive.
- If the key does not exist in either of the JSON files, no results will be displayed.</p>
<h2>File Structure</h2>
<h3>Key Files</h3>
<ol>
<li>
<strong>JsonTraverser.fs</strong>:
<ul>
<li>Contains functions for parsing and traversing JSON files using JavaScript's native <code>JSON.parse</code>.</li>
<li>Handles recursive navigation of objects and arrays.</li>
</ul>
</li>
<li>
<strong>JsonComparator.fs</strong>:
<ul>
<li>Implements recursive comparison logic for JSON files.</li>
<li><p>Defines types like <code>ComparisonResult</code> and <code>UnionDictionary</code>.</p></li>
</ul>
</li>
<li>
<strong>Client.fs</strong>:
<ul>
<li>Manages client-side functionality, including file input handling and dynamic UI updates.</li>
<li>Integrates filtering logic for comparison results.</li>
</ul>
</li>
<li>
<strong>Main.fs</strong>:
<ul>
<li>Server-side entry point for the application.</li>
<li>Handles routing, templates, and rendering.</li>
</ul>
</li>
<li>
<strong>Main.html</strong>:
<ul>
<li>Defines the web interface with sections for file input, target selection, and comparison result display.</li>
</ul>
</li>
<li>
<strong>wsconfig.json</strong>:
<ul>
<li>Configuration file specifying project settings (e.g., output directory).</li>
</ul>
</li>
</ol>
<h2>How It Works</h2>
<h3>1. Validation</h3>
<p>The <code>traverseJsonDocument</code> function reads and parses JSON files using JavaScript's <code>JSON.parse</code>. Invalid files result in descriptive error messages.</p>
<h3>2. Traversing</h3>
<p>The <code>traverseElement</code> function recursively processes JSON structures:
- Supports strings, numbers, booleans, arrays, objects, and <code>null</code>.
- Ensures robust handling of edge cases like <code>null</code>.</p>
<h3>3. Comparison</h3>
<p>The <code>compareJsonValues</code> function compares two JSON structures recursively:
- Identifies differences in keys, values, and array sizes.
- Outputs results as a <code>UnionDictionary</code>.</p>
<h3>4. Filtering</h3>
<p>The filtering logic dynamically adjusts the displayed results based on user selection:
- Filters by <code>same = true</code>, <code>same = false</code>, or shows all entries.
- Updates output in real-time when the filter changes.</p>
<h2>Dependencies</h2>
<ol>
<li>
<strong>WebSharper</strong>:
<ul>
<li>Provides tools for building reactive web applications in F#.</li>
</ul>
</li>
<li>
<strong>JavaScript Native JSON Handling</strong>:
<ul>
<li><p>Uses JavaScript's native <code>JSON.parse</code> for parsing and processing JSON data directly in the browser environment.</p></li>
</ul>
</li>
<li>
<strong>FSharp.Formatting</strong> (optional):
<ul>
<li>Enables Markdown parsing for rendering documentation dynamically (if used).</li>
</ul>
</li>
</ol>
<h2>Usage</h2>
<h3>Installation</h3>
<ol>
<li>Clone the repository:</li>
</ol>
<p>Access the live version of JsonToolboxWebApp here:<br />
<a href="https://brthrepo.github.io/JsonToolboxWebApp/index.html">JsonToolboxWebApp Live</a></p>
<h2>Notable Features Implemented</h2>
<ol>
<li><p><strong>JavaScript Object Null Handling</strong>:</p></li>
<li><p>Ensured that <code>null</code> values are not misclassified as objects during traversal.</p></li>
<li><p>Added explicit checks to correctly identify and process <code>null</code> values at all recursive levels.</p></li>
<li><p><strong>Dynamic Filtering for Comparison Results</strong>:</p></li>
<li><p>Integrated a dropdown menu (<code>filterSame</code>) to allow filtering results based on the <code>same</code> property.</p></li>
<li><p>Added real-time updates to displayed results when the filter changes (<code>OnChange</code> event listener).</p></li>
</ol>
<hr />

</div>


<footer class="footer">
    For an enhanced template that provides automatic GitHub deployment to Azure, fork from
    <a href="https://github.com/intellifactory/ClientServer.Azure">GitHub</a>, or read more
    <a href="https://websharper.com/blog-entry/4368/deploying-websharper-apps-to-azure-via-github">here</a>.
</footer>


<script defer="">
    // File reading logic...
    function readFile(file) {
        return new Promise((resolve, reject) => {
            console.log("ReadFile function called with file:", file);
            if (!file || !(file instanceof File)) {
                console.error("Invalid file object");
                reject("Invalid file object.");
                return;
            }
            const reader = new FileReader();
            reader.onload = function () {
                resolve(reader.result);
            };
            reader.onerror = function (event) {
                reject(`Error reading the file: ${event.target.error.name}`);
            };
            reader.readAsText(file);
        });
    }
    window.readFileFromInput = readFile;
</script>





<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<div style="display:none" ws-children-template="MainForm"><div>

            <div class="input-row">
                <div>
                    <label for="fileInput" class="custom-file-label">Tallózás...</label>
                    <input type="file" id="fileInput" accept=".json" />
                </div>
                <div>
                    <label for="jsonTarget">Select Target:</label>
                    <select id="jsonTarget" a="">
                        <option value="json1">JSON 1</option>
                        <option value="json2">JSON 2</option>
                    </select>
                </div>
            </div>

            

            <hr />

            
            <h4>JSON Content 1:</h4>
            <pre id="jsonOutput1"></pre>

            <h4>JSON Content 2:</h4>
            <pre id="jsonOutput2"></pre>

            
            <h4 class="text-muted">response:</h4>
            <div class="jumbotron" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-height: 2em; border: 1px solid #ccc; padding: 5px;">
                ${Reversed}
            </div>

            
            <div>
                <h3>Filter Comparison Results</h3>
                <label for="filterSame">Show results where:</label>
                <select id="filterSame" class="form-control">
                    <option value="all">All</option>
                    <option value="true">Same</option>
                    <option value="false">Different</option>
                </select>
            </div>

            
            <div class="results-container">
                <h3>Result:</h3>
                <label for="keySearchInput">Search by Key</label>
                <input type="text" id="keySearchInput" class="form-control" placeholder="Enter key to search" />
            </div>

            <pre id="comparisonResult"></pre>

        </div></div></body>

</html>