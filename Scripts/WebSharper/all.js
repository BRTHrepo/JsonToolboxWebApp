var wsbundle=(()=>{var qe=Object.defineProperty;var fl=Object.getOwnPropertyDescriptor;var hl=Object.getOwnPropertyNames;var dl=Object.prototype.hasOwnProperty;var pl=(e,t)=>{for(var n in t)qe(e,n,{get:t[n],enumerable:!0})},ml=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of hl(t))!dl.call(e,l)&&l!==n&&qe(e,l,{get:()=>t[l],enumerable:!(r=fl(t,l))||r.enumerable});return e};var $l=e=>ml(qe({},"__esModule",{value:!0}),e);var iu={};pl(iu,{AfterRenderQ2$227$42:()=>Cl,EventQ2$211$36:()=>yl,Main:()=>vl,Runtime:()=>Xn});function O(e,t){return Object.assign(Object.create(e.prototype),t)}var gl=Symbol("force");function st(e){var t;function n(){return t||(t=e(l=>t=l)),t}return new Proxy(Function(),{get(l,s){return s==gl&&n(),n()[s]},set(l,s,o){return n()[s]=o,!0},construct(l,s,o){return Reflect.construct(n(),s,o)}})}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[r]===void 0&&delete e[r]}return e}function Lt(e){return e===void 0?null:{$:1,$0:e}}function Ot(e,t,n){n?e[t]=n.$0:delete e[t]}function zn(e){return function(...t){return e(t)}}function Zn(e){return Object.defineProperty(e,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),e}var wl={ScriptBasePath:"./",ScriptSkipAssemblyDir:!1},Xn=wl;function P(e){return"Dispose"in e}var H=class{Equals(t){return this===t}GetHashCode(){return-1}};function yl(e,t){return n=>r=>{let l=Y.GetInstance(e);return l.SetAnchorRoot(n),t({Vars:l,Anchors:l,Target:n,Event:r})}}function Cl(e,t){return n=>{let r=Y.GetInstance(e);r.SetAnchorRoot(n),t({Vars:r,Anchors:r,Target:n,Event:null})}}function Nl(e,t,n){let r=new ot("New_5"),l=new it("New_3"),s=V(t);try{for(;s.MoveNext();){let o=s.Current,i=o.Name;l.SAdd(i),r.set_Item(i,o)}}finally{typeof s=="object"&&P(s)&&s.Dispose()}return[xr(t,Dn(o=>{let i=o[0],u=o[1],d=o[2];if(l.Contains(i))return null;{let w=u===0?Y.GetOrAddHoleFor(e,i,()=>{let C=d==null?null:p(d.$0),m=wt.Create_1(C==null?"":C.$0);return new Ye(i,m)}):u===1?Y.GetOrAddHoleFor(e,i,()=>{let C=d==null?null:p(d.$0),m=wt.Create_1(C==null?0:C.$0);return new je(i,m)}):u===2?Y.GetOrAddHoleFor(e,i,()=>{let C=d==null?null:p(d.$0),m=wt.Create_1(C==null?!1:C.$0);return new tn(i,m)}):u===3?Y.GetOrAddHoleFor(e,i,()=>{let C=d==null?null:p(d.$0),m=wt.Create_1(C==null?-864e13:C.$0);return new en(i,m)}):u===4?Y.GetOrAddHoleFor(e,i,()=>new nn(i,wt.Create_1([]))):u===5?Y.GetOrAddHoleFor(e,i,()=>new xe(i,wt.Create_1(p(globalThis.document.querySelector("[ws-dom="+i+"]"))))):u===6?Y.GetOrAddHoleFor(e,i,()=>{let C=d==null?null:p(d.$0),m=wt.Create_1(C==null?[]:C.$0);return new rn(i,m)}):X("Invalid value type");return r.set_Item(i,w),p(w)}},n)),{$:0,$0:r}]}function vl(){console.log("Main function called"),globalThis.onload=()=>{let o=globalThis.document.getElementById("showJson1Modal");o.addEventListener("click",()=>Qn(Ht(1),1));let i=Ut("showJson2Modal");i?.$0.addEventListener("click",()=>Qn(Ht(2),2)),globalThis.document.getElementById("closeModal").addEventListener("click",()=>Yn()),globalThis.document.getElementById("closeModal1").addEventListener("click",()=>Yn());let u=globalThis.document.getElementById(bl());return console.log("File input is",u),N(u,null)?null:void(u.onchange=()=>{console.log("File input changed");let d=u.files;if(d.length>0){let w=d.item(0),C=null;br(kt(()=>{let m=globalThis.document.getElementById("jsonTarget").value,g=Ut(gr()),S=Ut(wr());return Gl(Rl(kt(()=>(console.log("file name: "+F(w.name)),vt(Al(w),T=>(JSON.parse(T),m=="json1"?g==null?(ft("No output div found."),tt()):(g.$0.textContent=T,ft("Json1 content loaded"),o.textContent=w.name,tt()):m=="json2"?S==null?(ft("No output div found."),tt()):(S.$0.textContent=T,ft("Json2 content loaded"),i==null||(i.$0.textContent=w.name),tt()):(ft("Invalid selection in dropdown."),console.log("Invalid selection in dropdown."),tt()))))),T=>m=="json1"?g==null?(ft("No output div found. Error in Json (if it is a real json): "+F(T.message)),tt()):(g.$0.textContent="Error: "+F(T.message),tt()):m=="json2"?S==null?(ft("No output div found. Error in Json (if it is a real json): "+F(T.message)),tt()):(S.$0.textContent="Error: "+F(T.message),tt()):(ft("Invalid selection in dropdown."),tt())),kt(()=>(xl(),tt())))}),null)}})};let e=yr().View,t=new Ze("New_1"),n=(t.h.push(new Qe("reversed",e)),t),r=Nl(n.k,n.h,[]),l=new ze(r[1],Ol(r[0]));return(n.i=l,l).Doc}function Qn(e,t){globalThis.document.getElementById(kn()).textContent="JSON Content "+String(t),globalThis.document.getElementById("formattedJson").textContent=e;let n=globalThis.document.querySelector("#jsonModal");return n.classList.add("show"),n.style.display="block",n.show,n.focus()}function Ht(e){let t=Ut(gr()),n=Ut(wr());return e===1?t==null?null:t.$0.textContent:e===2?n==null?null:n.$0.textContent:null}function Ut(e){let t=globalThis.document.getElementById(e);return N(t,null)?null:p(t)}function Yn(){let e=globalThis.document.getElementById("modalBody");if(e.textContent="",globalThis.document.getElementById("formattedJson")==null){let n=globalThis.document.createElement("pre");n.setAttribute("id","formattedJson"),e.appendChild(n)}let t=globalThis.document.querySelector("#jsonModal");t.classList.remove("show"),t.style.display="none"}function bl(){return xt.inputId}function gr(){return xt.outputDiv1Id}function wr(){return xt.outputDiv2Id}function Al(e){return kt(()=>{console.log("ReadJsonFromInput called "+String(e.name));let n=globalThis.readFile(e);return vt(Vn((r,l)=>{n.then(r).catch(()=>l(new Error("Error:")))}),r=>(console.log("JSON Content: "+F(r)),fe(r)))})}function ft(e){yr().Set(e)}function xl(){let e=Ut(Sl());console.log("Merge button is",e);let t=globalThis.document.getElementById(Tl());try{let n=Ht(1);console.log("json1Content: ",n);let r=Ht(2);console.log("json1Content: ",n),n!=null&&r!=null&&n.length!==0&&r.length!==0?(e!=null&&e.$==1?e.$0.addEventListener("click",()=>El()):console.log("Merge button is not found"),t.addEventListener("click",()=>_l(n,r))):(e!=null&&e.$==1?e.$0.addEventListener("click",()=>null):console.log("Merge button is not found"),t.addEventListener("click",()=>null),ft("Please load both JSON files before ..."))}catch(n){e!=null&&e.$==1?e.$0.addEventListener("click",()=>null):console.log("Merge button is not found"),t.addEventListener("click",()=>null),ft(n.message),console.log("Error during JSON comparison",n)}}function yr(){return xt.rvReversed}function kn(){return xt.modalTitleId}function Sl(){return xt.buttonMergeId}function Tl(){return xt.buttoncShowCmparisonResultId}function El(){globalThis.document.getElementById(kn()).textContent="Merge JSONs",globalThis.document.getElementById("modalBody"),Ht(1),Ht(2);let e=globalThis.document.querySelector("#jsonModal");return e.classList.add("show"),e.style.display="block",e.show,e.focus()}function _l(e,t){try{if(e!=null&&t!=null&&e.length!==0&&t.length!==0){globalThis.document.getElementById(kn()).textContent="Comparison Result";let n=globalThis.document.getElementById("modalBody"),r=kl(e,t),l=globalThis.document.getElementById("filterSame").value,s=globalThis.document.getElementById("keySearchInput");Jl(n,r,l,s.value==null||an(s.value)==""?"":p(an(s.value)).$0)}}catch(n){console.log("Error during JSON comparison",n),ft("Error during JSON comparison: "+F(n.message))}}function kl(e,t){console.log("Comparing JSON strings...");try{let n=z(rr(e),rr(t));return console.log("Comparison result: 2"),Ne(n,0),console.log(null),n}catch(n){throw console.log("Error during JSON comparison: "+n.message),n}}var Y=st(e=>class extends H{static{Y=e(this)}static init;id;vars;static initialized;static instances;static GetInstance(n){return Y.instances.Item(n)}static GetOrAddHoleFor(n,r,l){let s,o=Y.GetHolesFor(n),i=(s=null,[o.TryGetValue(r,{get:()=>s,set:u=>{s=u}}),s]);if(i[0])return i[1];{let u=l();return o.set_Item(r,u),u}}static GetHolesFor(n){let r,l=(r=null,[Y.initialized.TryGetValue(n,{get:()=>r,set:s=>{r=s}}),r]);if(l[0])return l[1];{let s=new ot("New_5");return Y.initialized.set_Item(n,s),s}}static{Y.initialized=new ot("New_5"),Y.instances=new ot("New_5")}}),ze=class extends H{doc;allVars;anchorRoot;SetAnchorRoot(t){this.anchorRoot=t}get Doc(){return this.doc}constructor(t,n){super(),this.doc=n,this.allVars=t.$==0?t.$0:X("Should not happen"),this.anchorRoot=null}};function b(e,t){return Cr(e,t),e[t]}function L(e){return e.dims===2?e.length*e.length:e.length}function Cr(e,t){(t<0||t>=e.length)&&X("Index was outside the bounds of the array.")}function Nr(e,t,n){Cr(e,t),e[t]=n}function N(e,t){if(e===t)return!0;{let l=typeof e;if(l=="object"){if(e==null||t===null||t===void 0||!N(typeof t,"object"))return!1;if("Equals"in e)return e.Equals(t);if("Equals"in t)return!1;if(e instanceof Array&&t instanceof Array)return jn(e,t);if(e instanceof Date&&t instanceof Date)return Vl(e,t);{let s=[!0],o;for(var n in e)if((i=>(s[0]=!e.hasOwnProperty(i)||t.hasOwnProperty(i)&&N(e[i],t[i]),!s[0]))(n))break;if(s[0]){let i;for(var r in t)if((u=>(s[0]=!t.hasOwnProperty(u)||e.hasOwnProperty(u),!s[0]))(r))break}return s[0]}}else return l=="function"&&("$Func"in e?e.$Func===t.$Func&&e.$Target===t.$Target:"$Invokes"in e&&"$Invokes"in t&&jn(e.$Invokes,t.$Invokes))}}function jn(e,t){let n,r;if(L(e)===L(t)){for(n=!0,r=0;n&&r<L(e);)N(b(e,r),b(t,r))||(n=!1),r=r+1;return n}else return!1}function Vl(e,t){return e.getTime()===t.getTime()}function It(e){let t=typeof e;return t=="function"?0:t=="boolean"?e?1:0:t=="number"?e:t=="string"?vr(e):t=="object"?e==null?0:e instanceof Array?Il(e):Ml(e):0}function vr(e){let t;if(e===null)return 0;t=5381;for(let n=0,r=e.length-1;n<=r;n++)t=Ae(t,e[n].charCodeAt());return t}function Il(e){let t=-34948909;for(let n=0,r=L(e)-1;n<=r;n++)t=Ae(t,It(b(e,n)));return t}function Ml(e){if("GetHashCode"in e)return e.GetHashCode();{let n=[0],r;for(var t in e)if((l=>(n[0]=Ae(Ae(n[0],vr(l)),It(e[l])),!1))(t))break;return n[0]}}function gt(e,t){if(e===t)return 0;{let l=typeof e;switch(l=="function"?1:l=="boolean"||l=="number"||l=="string"?2:l=="object"?3:0){case 0:return typeof t>"u"?0:-1;case 1:return X("Cannot compare function values.");case 2:return e<t?-1:1;case 3:if(e===null)return-1;if(t===null)return 1;if("CompareTo"in e)return e.CompareTo(t);if("CompareTo0"in e)return e.CompareTo0(t);if(e instanceof Array&&t instanceof Array)return Dl(e,t);if(e instanceof Date&&t instanceof Date)return Fl(e,t);{let s=[0],o;for(var n in e)if((i=>e.hasOwnProperty(i)?t.hasOwnProperty(i)?(s[0]=gt(e[i],t[i]),s[0]!==0):(s[0]=1,!0):!1)(n))break;if(s[0]===0){let i;for(var r in t)if((u=>t.hasOwnProperty(u)?!e.hasOwnProperty(u)&&(s[0]=-1,!0):!1)(r))break}return s[0]}break}}}function Ae(e,t){return(e<<5)+e+t}function Dl(e,t){let n,r;if(L(e)<L(t))return-1;if(L(e)>L(t))return 1;for(n=0,r=0;n===0&&r<L(e);)n=gt(b(e,r),b(t,r)),r=r+1;return n}function Fl(e,t){return gt(e.getTime(),t.getTime())}function X(e){throw new Error(e)}function yt(e){return[e.K,e.V]}function le(e,t){let n=1+t-e;return n<=0?[]:Ql(n,r=>r+e)}function Ll(e){let t=[],n;for(var r in e)t.push(e[r]);return t}function F(e){return e??""}var Ze=class extends H{i;k;h;s;static New_1(){return new this("New_1")}constructor(t){if(t=="New_1"){let n;super(),this.i=null,this.k=(n=Hl(),String(n)),this.h=Zn([]),Ot(this,"s",null)}}},Xe=class extends H{};function Ol(e){return $s("main"),e?gs("main",p("mainform"),e):void 0}var ot=class extends H{equals;hash;count;data;Item(t){return this.get(t)}get(t){let n=this.data[this.hash(t)];return n==null?Ts():hs(r=>{let l=yt(r);return this.equals.apply(null,[l[0],t])?p(l[1]):null},n)}set_Item(t,n){this.set(t,n)}set(t,n){let r=this.hash(t),l=this.data[r];if(l==null)this.count=this.count+1,this.data[r]=new Array({K:t,V:n});else{let s=kr(o=>this.equals.apply(null,[yt(o)[0],t]),l);s==null?(this.count=this.count+1,l.push({K:t,V:n})):l[s.$0]={K:t,V:n}}}TryGetValue(t,n){let r=this.data[this.hash(t)];if(r==null)return!1;{let l=_r(s=>{let o=yt(s);return this.equals.apply(null,[o[0],t])?p(o[1]):null},r);return l!=null&&l.$==1&&(n.set(l.$0),!0)}}GetEnumerator(){return to(ds(Ll(this.data)))}ContainsKey(t){let n=this.data[this.hash(t)];return n==null?!1:Ir(r=>this.equals.apply(null,[yt(r)[0],t]),n)}RemoveKey(t){return this.remove(t)}get Keys(){return new $n(this)}get Values(){return new Sn(this)}remove(t){let n=this.hash(t),r=this.data[n];if(r==null)return!1;{let l=he(s=>!this.equals.apply(null,[yt(s)[0],t]),r);return L(l)<r.length&&(this.count=this.count-1,this.data[n]=l,!0)}}static New_5(){return new this("New_5")}static New_6(t,n,r){return new this("New_6",t,n,r)}constructor(t,n,r,l){if(t=="New_5"&&(t="New_6",n=[],r=N,l=It),t=="New_6"){let s=n,o=r,i=l;super(),this.equals=o,this.hash=i,this.count=0,this.data=[];let u=V(s);try{for(;u.MoveNext();){let d=u.Current;this.set(d.K,d.V)}}finally{typeof u=="object"&&P(u)&&u.Dispose()}}}};function p(e){return{$:1,$0:e}}var xt=st(e=>class{static{xt=e(this)}static outputDiv2Id;static outputDiv1Id;static inputId;static buttoncShowCmparisonResultId;static buttonMergeId;static modalTitleId;static rvReversed;static{this.rvReversed=wt.Create_1("Hello"),this.modalTitleId="jsonModalLabel",this.buttonMergeId="MergeJsons",this.buttoncShowCmparisonResultId="comparisonResultBt",this.inputId="fileInput",this.outputDiv1Id="jsonOutput1",this.outputDiv2Id="jsonOutput2"}});function kt(e){return t=>{try{e()(t)}catch(n){t.k(Mn(n))}}}function Gl(e,t){return vt(e,()=>t)}function Rl(e,t){return n=>{e(In(r=>{if(r.$==0)n.k(Me(r.$0));else if(r.$==1)try{t(r.$0)(n)}catch{n.k(r)}else n.k(r)},n.ct))}}function vt(e,t){return Wl(n=>{e(In(r=>{if(r.$==0){let l=r.$0;Bt().Fork(()=>{try{t(l)(n)}catch(s){n.k(Mn(s))}})}else Bt().Fork(()=>{n.k(r)})},n.ct))})}function tt(){return De.Zero}function br(e,t){let n=Pl()[0],r=t==null?n:t.$0;Bt().Fork(()=>{r.c||e(In(l=>{l.$==1&&Ul(l.$0)},r))})}function Wl(e){return t=>{t.ct.c?ql(t):e(t)}}function Vn(e){return t=>{let n=[!1],r=l=>{n[0]?X("A continuation provided by Async.FromContinuations was invoked multiple times"):(n[0]=!0,Bt().Fork(l))};e(l=>{r(()=>{t.k(Me(l))})},l=>{r(()=>{t.k(Mn(l))})},l=>{r(()=>{t.k(Ar(l))})})}}function fe(e){return t=>{t.k(Me(e))}}function Pl(){return De.defCTS}function Ul(e){console.log("WebSharper: Uncaught asynchronous exception",e)}function ql(e){e.k(Ar(new dn("New",e.ct)))}function Bt(){return De.scheduler}var Q=class extends H{ForTextView(){return console.warn("Content hole filled with attribute data",this.Name),null}AddAttribute(t,n){console.warn("Var hole filled with non-Var data",this.Name)}get AsChoiceView(){return console.warn("Attribute value hole filled with non-text data",this.Name),Rn("")}},Qe=class extends Q{name;fillWith;get Name(){return this.name}ForTextView(){return p(this.fillWith)}get AsChoiceView(){return Ft(this.fillWith)}constructor(t,n){super(),this.name=t,this.fillWith=n}};function Hl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]","g"),e=>{let t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}function Bl(e,t){return eu(e,-2147483648,2147483647,t)}var Mt=class e extends H{docNode;updates;static get Empty(){return e.Mk(null,ie())}static RunBefore(t,n){let r=globalThis.document.createTextNode("");t.parentNode.insertBefore(r,t),e.RunBetween(r,t,n)}static Mk(t,n){return new e(t,n)}static RunBetween(t,n,r){Gn(n,r.docNode);let l=Go(t,n,r.docNode);qr(jr()||tl()?oi(Ro(!1,l,r.docNode)):()=>{Wo(!1,l,r.docNode)},r.updates)}static TextNode(t){return e.Mk(Es(globalThis.document.createTextNode(t)),ie())}static TextView(t){let n=Po();return e.Mk(_s(n),q(r=>{Uo(n,r)},t))}ReplaceInDom(t){let n=globalThis.document.createTextNode("");t.parentNode.replaceChild(n,t),e.RunBefore(n,this)}constructor(t,n){super(),this.docNode=t,this.updates=n}},wt=st(e=>class extends H{static{wt=e(this)}static Create_1(n){return new ln(!1,{s:Oe(n,[])},n)}});function In(e,t){return{k:e,ct:t}}function Mn(e){return{$:1,$0:e}}function Me(e){return{$:0,$0:e}}function Ar(e){return{$:2,$0:e}}var De=st(e=>class{static{De=e(this)}static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static{this.noneCT=Kl(!1,[]),this.scheduler=new sn,this.defCTS=[new on],this.Zero=fe(),this.GetCT=n=>{n.k(Me(n.ct))}}});function Jl(e,t,n,r){let l=globalThis.document;function s(i){return u=>{let d,w,C,m,g=l.createElement("div");g.className="cmp-entry",g.setAttribute("style","margin-left: "+String(u*20)+"px;");let S=l.createElement("div");S.className="cmp-label";let T=l.createElement("div");T.className="cmp-content";let _=(f,c)=>{let a=l.createElement("div"),h=l.createElement("span");h.className="cmp-field-label",h.textContent=f,a.appendChild(h),a.appendChild(c),T.appendChild(a)},E=f=>{let c=l.createElement("button"),a=l.createElement("div");a.style.display="none",c.textContent="\u2795",c.onclick=()=>a.style.display=="none"?(a.style.display="block",void(c.textContent="\u2796")):(a.style.display="none",void(c.textContent="\u2795")),S.appendChild(c),f(a),T.appendChild(a)};if(i.$==0){let f=i.$0;ye(i.json1Value,i.json2Value,r,n,f.same)?g.setAttribute("style","color: darkgreen;"):g.setAttribute("style","color: lightgray;"),S.innerHTML="<b>ObjectComparison</b>";let c=l.createElement("span");c.textContent=(d=f.actualSame,String(d)),_("Same:",c),_("JSON1:",Ct(u,f.json1Value)),_("JSON2:",Ct(u,f.json2Value)),E(a=>{let h=V(f.children);try{for(;h.MoveNext();){let $=h.Current,y=yt($),v=s(y[1])(u+2),x=l.createElement("div");x.className="cmp-field",x.setAttribute("style","margin-left: "+String((u+1)*20)+"px;"),x.innerHTML='<span class="cmp-key">'+F(Wt(y[0]))+"</span>",x.appendChild(v),a.appendChild(x)}}finally{typeof h=="object"&&P(h)&&h.Dispose()}})}else if(i.$==1){let f=i.$0;ye(i.json1Value,i.json2Value,r,n,f.same)?g.setAttribute("style","color: darkgreen;"):g.setAttribute("style","color: lightgray;"),S.innerHTML="<b>ArrayComparison</b>";let c=l.createElement("span");c.textContent=(w=f.actualSame,String(w)),_("Same:",c),_("JSON1:",Ct(u,f.json1Value)),_("JSON2:",Ct(u,f.json2Value)),E(a=>{for(let h=0,$=L(f.items)-1;h<=$;h++){let y=s(b(f.items,h))(u+2),v=l.createElement("div");v.className="cmp-array-item",v.setAttribute("style","margin-left: "+String((u+1)*20)+"px;"),v.innerHTML='<span class="cmp-index">'+String(h)+"</span>",v.appendChild(y),a.appendChild(v)}})}else if(i.$==3){let f=i.$0;ye(i.json1Value,i.json2Value,r,n,f.same)?g.setAttribute("style","color: darkgreen;"):g.setAttribute("style","color: lightgray;"),S.innerHTML="<b>TypeMismatchComparison</b>";let a=l.createElement("span");a.textContent=String(f.same),_("Same:",a),_("JSON1:",Ct(u,f.json1Value)),_("JSON2:",Ct(u,f.json2Value));let h=l.createElement("div");h.setAttribute("style","display: inline-block; margin-left: 5px;"),S.appendChild(h);let $=f.children1;if($==null)console.log("No children1");else{let v=_t((C=Math.random(),String(C)),".",""),x=l.createElement("button"),A=l.createElement("div");x.setAttribute("id","btn1_"+F(v)),A.setAttribute("id","div1_"+F(v)),A.style.display="none",x.textContent="\u2795 Children1",x.setAttribute("style","margin-right: 5px; background-color: #e6f7ff;"),x.onclick=()=>A.style.display=="none"?(A.style.display="block",void(x.textContent="\u2796 Children1")):(A.style.display="none",void(x.textContent="\u2795 Children1")),h.appendChild(x);let D=l.createElement("div");D.setAttribute("style","margin-top: 5px; font-weight: bold; color: #0066cc;"),D.textContent="Children1 Content:",A.appendChild(D);let k=l.createElement("div");k.setAttribute("style","border-left: 2px solid #e6f7ff; padding-left: 10px; margin-top: 5px;"),k.appendChild(s($.$0)(u+1)),A.appendChild(k),T.appendChild(A)}let y=f.children2;if(y==null)console.log("No children2");else{let v=_t((m=Math.random(),String(m)),".",""),x=l.createElement("button"),A=l.createElement("div");x.setAttribute("id","btn2_"+F(v)),A.setAttribute("id","div2_"+F(v)),A.style.display="none",x.textContent="\u2795 Children2",x.setAttribute("style","margin-right: 5px; background-color: #fff0f0;"),x.onclick=()=>A.style.display=="none"?(A.style.display="block",void(x.textContent="\u2796 Children2")):(A.style.display="none",void(x.textContent="\u2795 Children2")),h.appendChild(x);let D=l.createElement("div");D.setAttribute("style","margin-top: 5px; font-weight: bold; color: #cc0000;"),D.textContent="Children2 Content:",A.appendChild(D);let k=l.createElement("div");k.setAttribute("style","border-left: 2px solid #fff0f0; padding-left: 10px; margin-top: 5px;"),k.appendChild(s(y.$0)(u+1)),A.appendChild(k),T.appendChild(A)}}else{let f=i.$0;ye(i.json1Value,i.json2Value,r,n,f.same)?g.setAttribute("style","color: darkgreen;"):g.setAttribute("style","color: lightgray;"),S.innerHTML="<b>PrimitiveComparison</b>";let c=l.createElement("span");c.textContent=String(f.same),_("Same:",c),_("JSON1:",Ct(u,f.json1Value)),_("JSON2:",Ct(u,f.json2Value))}return g.appendChild(S),g.appendChild(T),g}}for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(s(t)(0));let o=globalThis.document.querySelector("#jsonModal");o.classList.add("show"),o.style.display="block",o.show(),o.focus()}function Ct(e,t){let n=globalThis.document,r=Pt(e,"  "),l=n.createElement("div");if(l.appendChild(n.createTextNode(r)),t.$==1)l.innerHTML="<b>Object</b> - Key: "+F(Wt(t.$0));else if(t.$==2)l.innerHTML="<b>Array</b> - Key: "+F(Wt(t.$0));else if(t.$==3)l.innerHTML="<b>Null</b> - Key: "+F(Wt(t.$0));else{let s=t.$1,o=typeof s=="string"?'"'+F(Wt(s))+'"':typeof s=="number"||typeof s=="number"||typeof s=="boolean"?String(s):N(s,null)?"null":String(s);l.innerHTML="<b>Primitive</b> - Key: "+F(Wt(t.$0))+", Value: "+F(o)}return l}function Wt(e){return _t(_t(_t(_t(_t(e,"&","&amp;"),"<","&lt;"),">","&gt;"),'"',"&quot;"),"'","&#39;")}function ye(e,t,n,r,l){let s=Te(e),o=Te(t),i=(console.log("filterKey: "+String(n)),console.log("key1: "+String(String(s.$0))),console.log("key2: "+String(String(o.$0))),!He(n)&&!He(s.$0)&&!He(o.$0)?s!=null&&s.$0.indexOf(n)!=-1||lr(e).indexOf(n)!=-1||o!=null&&o.$0.indexOf(n)!=-1||lr(t).indexOf(n)!=-1:!0);console.log("keyFilterPassed: "+String(i)+"  ");let u=r=="true"?l:r=="false"?!l:!0;return console.log("sameFilterPassed: "+String(u)+"  "),console.log("--------------------------------------------------------------------"),i&&u}function Ne(e,t){for(;;){let n=Pt(t,"  ");if(e.$==0){let r=e.$0;console.log(s=>F(s)+"ObjectComparison",n),Nt(t+1,r.json1Value),Nt(t+1,r.json2Value),console.log(F(n)+"same: "+String(r.actualSame));let l=V(r.children);try{for(;l.MoveNext();){let s=yt(l.Current);console.log(o=>i=>F(o)+"Field key: "+F(i),n,s[0]),Ne(s[1],t+1)}return}finally{typeof l=="object"&&P(l)&&l.Dispose()}}else if(e.$==1){let r=e.$0;console.log(l=>F(l)+"ArrayComparison",n),Nt(t+1,r.json1Value),Nt(t+1,r.json2Value),console.log(F(n)+"same: "+String(r.actualSame));for(let l=0,s=L(r.items)-1;l<=s;l++)Ne(b(r.items,l),t+1);return}else if(e.$==3){let r=e.$0;console.log(o=>F(o)+"TypeMismatchComparison",n),Nt(t+1,r.json1Value),Nt(t+1,r.json2Value),console.log(F(n)+"same: "+String(r.same));let l=r.children1;l==null||(console.log(o=>F(o)+"Children1:",n),Ne(l.$0,t+1));let s=r.children2;if(s==null)return null;console.log(o=>F(o)+"Children2:",n),e=s.$0,t=t+1}else{let r=e.$0;return console.log(String(n)+"PrimitiveComparison [same: "+String(r.same)+"]"),console.log(String(n)+"json1Value:"),Nt(t+1,r.json1Value),console.log(String(n)+"json2Value:"),Nt(t+1,r.json2Value)}}}function He(e){return e==null||an(e)==""}function Nt(e,t){t.$==1?console.log(String(Pt(e,"  "))+"Object - Key: "+String(t.$0)):t.$==2?console.log(String(Pt(e,"  "))+"Array - Key: "+String(t.$0)):t.$==3?console.log(String(Pt(e,"  "))+"Null - Key: "+String(t.$0)):console.log(String(Pt(e,"  "))+"Primitive - Key: "+String(t.$0)+", Value: "+String(t.$1))}function Kl(e,t){return{c:e,r:t}}var it=class e extends H{equals;hash;data;count;SAdd(t){return this.add(t)}Contains(t){let n=this.data[this.hash(t)];return n==null?!1:this.arrContains(t,n)}add(t){let n=this.hash(t),r=this.data[n];return r==null?(this.data[n]=[t],this.count=this.count+1,!0):this.arrContains(t,r)?!1:(r.push(t),this.count=this.count+1,!0)}arrContains(t,n){let r=!0,l=0,s=n.length;for(;r&&l<s;)this.equals.apply(null,[n[l],t])?r=!1:l=l+1;return!r}GetEnumerator(){return V(Ke(this.data))}ExceptWith(t){let n=V(t);try{for(;n.MoveNext();)this.Remove(n.Current)}finally{typeof n=="object"&&P(n)&&n.Dispose()}}get Count(){return this.count}IntersectWith(t){let n=new e("New_4",t,this.equals,this.hash),r=Ke(this.data);for(let l=0,s=r.length-1;l<=s;l++){let o=r[l];n.Contains(o)||this.Remove(o)}}Remove(t){let n=this.data[this.hash(t)];return n==null?!1:this.arrRemove(t,n)&&(this.count=this.count-1,!0)}CopyTo(t,n){let r=Ke(this.data);for(let l=0,s=r.length-1;l<=s;l++)Nr(t,l+n,r[l])}arrRemove(t,n){let r=!0,l=0,s=n.length;for(;r&&l<s;)this.equals.apply(null,[n[l],t])?(n.splice(l,1),r=!1):l=l+1;return!r}static New_3(){return new this("New_3")}static New_4(t,n,r){return new this("New_4",t,n,r)}static New_2(t){return new this("New_2",t)}constructor(t,n,r,l){t=="New_3"&&(t="New_4",n=[],r=N,l=It);let s;if(t=="New_2"&&(s=n,t="New_4",n=s,r=N,l=It),t=="New_4"){let o=n,i=r,u=l;super(),this.equals=i,this.hash=u,this.data=[],this.count=0;let d=V(o);try{for(;d.MoveNext();)this.add(d.Current)}finally{typeof d=="object"&&P(d)&&d.Dispose()}}}};function xr(e,t){return{GetEnumerator:()=>{let n=V(e),r=[!0];return new ut(n,null,l=>{if(l.s.MoveNext())return l.c=l.s.Current,!0;{let s=l.s;return N(s,null)||s.Dispose(),l.s=null,r[0]&&(r[0]=!1,l.s=V(t),l.s.MoveNext()?(l.c=l.s.Current,!0):(l.s.Dispose(),l.s=null,!1))}},l=>{let s=l.s;N(s,null)||s.Dispose()})}}}function Dt(e){return{GetEnumerator:()=>V(e())}}function rt(e,t){return{GetEnumerator:()=>{let n=V(t);return new ut(null,null,r=>n.MoveNext()&&(r.c=e(n.Current),!0),()=>{n.Dispose()})}}}function zl(e){let t=V(e);try{return t.MoveNext()?t.Current:ke()}finally{typeof t=="object"&&P(t)&&t.Dispose()}}function Zl(e,t){return Tr(n=>{let r=e(n);return r==null?W.Empty:Wr([r.$0])},t)}function Xl(e){return Er(t=>t,e)}function Sr(e,t,n){let r=t,l=V(n);try{for(;l.MoveNext();)r=e(r,l.Current);return r}finally{typeof l=="object"&&P(l)&&l.Dispose()}}function tr(e,t){let n=V(t);try{let r=null;for(;r==null&&n.MoveNext();){let l=n.Current;e(l)&&(r=p(l))}return r}finally{typeof n=="object"&&P(n)&&n.Dispose()}}function Ql(e,t){return jl(e,ts(t))}function Yl(e,t,n){return!ns((r,l)=>!e(r,l),t,n)}function Tr(e,t){return rs(rt(e,t))}function Er(e,t){return{GetEnumerator:()=>{let n=V(t),r=new it("New_3");return new ut(null,null,l=>{let s,o;if(n.MoveNext()){for(s=n.Current,o=r.SAdd(e(s));!o&&n.MoveNext();)s=n.Current,o=r.SAdd(e(s));return o&&(l.c=s,!0)}else return!1},()=>{n.Dispose()})}}}function jl(e,t){return e<0&&xo(),{GetEnumerator:()=>{let n=[V(t)];return new ut(0,null,r=>{if(r.s=r.s+1,r.s>e)return!1;{let l=n[0];return N(l,null)?ke():l.MoveNext()?(r.c=l.Current,r.s===e&&(l.Dispose(),n[0]=null),!0):(l.Dispose(),n[0]=null,ke())}},()=>{let r=n[0];N(r,null)||r.Dispose()})}}}function ts(e){return{GetEnumerator:()=>new ut(0,null,t=>(t.c=e(t.s),t.s=t.s+1,!0),void 0)}}function es(e,t){let n=V(t);try{for(;n.MoveNext();)e(n.Current)}finally{typeof n=="object"&&P(n)&&n.Dispose()}}function ns(e,t,n){let r=V(t);try{let l=V(n);try{let s=!1;for(;!s&&r.MoveNext()&&l.MoveNext();)s=e(r.Current,l.Current);return s}finally{typeof l=="object"&&P(l)&&l.Dispose()}}finally{typeof r=="object"&&P(r)&&r.Dispose()}}function rs(e){return{GetEnumerator:()=>{let t=V(e);function n(r){for(;;){let l=r.s;if(N(l,null))if(t.MoveNext())r.s=V(t.Current),r=r;else return t.Dispose(),!1;else{if(l.MoveNext())return r.c=l.Current,!0;r.Dispose(),r.s=null,r=r}}}return new ut(null,null,n,r=>{let l=r.s;N(l,null)||l.Dispose(),N(t,null)||t.Dispose()})}}}function ls(e){return Dt(()=>At(e).slice().reverse())}function ss(e,t){e<0&&X("negative index requested");let n=-1,r=V(t);try{for(;n<e;)r.MoveNext()||ke(),n=n+1;return r.Current}finally{typeof r=="object"&&P(r)&&r.Dispose()}}function os(e,t,n){let r=V(t);try{let l=V(n);try{let s=0,o=!0;for(;o&&s===0;)r.MoveNext()?s=l.MoveNext()?e(r.Current,l.Current):1:l.MoveNext()?s=-1:o=!1;return s}finally{typeof l=="object"&&P(l)&&l.Dispose()}}finally{typeof r=="object"&&P(r)&&r.Dispose()}}function is(e,t){return{GetEnumerator:()=>new ut(t,null,n=>{let r=e(n.s);return r==null?!1:(n.c=r.$0[0],n.s=r.$0[1],!0)},void 0)}}function us(e){let t=V(e);try{t.MoveNext()||cs();let n=t.Current;for(;t.MoveNext();){let r=t.Current;gt(r,n)===1&&(n=r)}return n}finally{typeof t=="object"&&P(t)&&t.Dispose()}}function cs(){return X("The input sequence was empty.")}function as(e,t){return!fs(n=>!e(n),t)}function fs(e,t){let n=V(t);try{let r=!1;for(;!r&&n.MoveNext();)r=e(n.Current);return r}finally{typeof n=="object"&&P(n)&&n.Dispose()}}function Dn(e,t){let n=[];for(let r=0,l=t.length-1;r<=l;r++){let s=e(t[r]);s==null||n.push(s.$0)}return n}function hs(e,t){let n=_r(e,t);return n==null?X("KeyNotFoundException"):n.$0}function _r(e,t){let n=null,r=0;for(;r<t.length&&n==null;){let l=e(t[r]);l!=null&&l.$==1&&(n=l),r=r+1}return n}function kr(e,t){let n=null,r=0;for(;r<t.length&&n==null;)e(t[r])&&(n=p(r)),r=r+1;return n}function ds(e){return Array.prototype.concat.apply([],At(e))}function Vr(e,t){let n=new Array(e);for(let r=0,l=e-1;r<=l;r++)n[r]=t;return n}function Fn(e){let t=[],n=e;for(;n.$!=0;)t.push(lo(n)),n=Pr(n);return t}function Ir(e,t){let n=!1,r=0;for(;!n&&r<L(t);)e(t[r])?n=!0:r=r+1;return n}function lt(e,t){for(let n=0,r=t.length-1;n<=r;n++)e(t[n])}function Ln(e,t,n){let r=n,l=t.length;for(let s=1,o=l;s<=o;s++)r=e(t[l-s],r);return r}function St(e,t){let n=new Array(t.length);for(let r=0,l=t.length-1;r<=l;r++)n[r]=e(t[r]);return n}function At(e){if(e instanceof Array)return e.slice();if(e instanceof W)return Fn(e);{let t=[],n=V(e);try{for(;n.MoveNext();)t.push(n.Current);return t}finally{typeof n=="object"&&P(n)&&n.Dispose()}}}function he(e,t){let n=[];for(let r=0,l=t.length-1;r<=l;r++)e(t[r])&&n.push(t[r]);return n}function ps(e){To(t=>t[0],So((t,n)=>[n,t],e).sort(gt))}function Mr(e,t){let n=!0,r=0;for(;n&&r<L(t);)e(t[r])?r=r+1:n=!1;return n}function ms(e,t){e<0&&X("Negative size given.");let n=new Array(e);for(let r=0,l=e-1;r<=l;r++)n[r]=t(r);return n}var Ye=class extends Q{name;fillWith;get Name(){return this.name}ForTextView(){return p(this.fillWith.View)}AddAttribute(t,n){t(n)(Xo(this.fillWith))}get AsChoiceView(){return Ft(q(String,this.fillWith.View))}constructor(t,n){super(),this.name=t,this.fillWith=n}},je=class extends Q{name;fillWith;get Name(){return this.name}ForTextView(){return p(q(String,this.fillWith.View))}AddAttribute(t,n){t(n)(Qo(this.fillWith))}get AsChoiceView(){return Ft(q(String,this.fillWith.View))}constructor(t,n){super(),this.name=t,this.fillWith=n}},tn=class extends Q{name;fillWith;get Name(){return this.name}ForTextView(){return p(q(String,this.fillWith.View))}AddAttribute(t,n){t(n)(Yo(this.fillWith))}get AsChoiceView(){return Ft(q(String,this.fillWith.View))}constructor(t,n){super(),this.name=t,this.fillWith=n}},en=class extends Q{name;fillWith;get Name(){return this.name}ForTextView(){return p(q(t=>new Date(t).toLocaleString(),this.fillWith.View))}AddAttribute(t,n){t(n)(jo(this.fillWith))}get AsChoiceView(){return Ft(q(t=>new Date(t).toLocaleString(),this.fillWith.View))}constructor(t,n){super(),this.name=t,this.fillWith=n}},nn=class extends Q{name;fillWith;get Name(){return this.name}ForTextView(){return p(q(String,this.fillWith.View))}AddAttribute(t,n){t(n)(ti(this.fillWith))}get AsChoiceView(){return Ft(q(String,this.fillWith.View))}constructor(t,n){super(),this.name=t,this.fillWith=n}},xe=class extends Q{name;fillWith;get Name(){return this.name}get Value(){return this.fillWith}constructor(t,n){super(),this.name=t,this.fillWith=n}},rn=class extends Q{name;fillWith;get Name(){return this.name}ForTextView(){return p(q(t=>Jt(",",t),this.fillWith.View))}AddAttribute(t,n){t(n)(ei(this.fillWith))}get AsChoiceView(){return Ft(q(String,this.fillWith.View))}constructor(t,n){super(),this.name=t,this.fillWith=n}};function $s(e){ws()||(ys(!0),Cs(globalThis.document.body,"")),se().set_Item(e,Fe(""))}function gs(e,t,n){let r,l=(r=null,[Fe(e).TryGetValue(t==null?"":t.$0,{get:()=>r,set:s=>{r=s}}),r]);return l[0]?Ns(l[1].cloneNode(!0),n):(console.warn("Local template doesn't exist",t),Mt.Empty)}function ws(){return Qt.LocalTemplatesLoaded}function ys(e){Qt.LocalTemplatesLoaded=e}function Cs(e,t){let n=Fe(t),r=new ot("New_5"),l=e.querySelectorAll("[ws-template]");for(let w=0,C=l.length-1;w<=C;w++){let m=l[w],g=m.getAttribute("ws-template").toLowerCase();m.removeAttribute("ws-template"),r.set_Item(g,Dr(m))}let s=e.querySelectorAll("[ws-children-template]");for(let w=0,C=s.length-1;w<=C;w++){let m=s[w],g=m.getAttribute("ws-children-template").toLowerCase();m.removeAttribute("ws-children-template"),r.set_Item(g,vs(m))}let o=e.querySelectorAll("template[id]");for(let w=0,C=o.length-1;w<=C;w++){let m=o[w];r.set_Item(m.getAttribute("id").toLowerCase(),er(m))}let i=e.querySelectorAll("template[name]");for(let w=0,C=i.length-1;w<=C;w++){let m=i[w];r.set_Item(m.getAttribute("name").toLowerCase(),er(m))}let u=new it("New_3");function d(w){if(!n.ContainsKey(w)){let C,m=(C=null,[r.TryGetValue(w,{get:()=>C,set:g=>{C=g}}),C]);m[0]?(u.SAdd(w),r.RemoveKey(w),ne(t,p(w),m[1],p(d))):console.warn(u.Contains(w)?"Encountered loop when instantiating "+w:"Local template does not exist: "+w)}}for(;r.count>0;)d(zl(r.Keys))}function se(){return Qt.LoadedTemplates}function Fe(e){let t,n=(t=null,[se().TryGetValue(e,{get:()=>t,set:r=>{t=r}}),t]);if(n[0])return n[1];{let r=new ot("New_5");return se().set_Item(e,r),r}}function Ns(e,t){let n,r=bs(e,xr(t,As().Values)),l=r[1],s=r[0],o=s.Els;return!N(o,null)&&o.length===1&&b(o,0)instanceof Node&&N(b(o,0).nodeType,Node.ELEMENT_NODE)&&(n=b(o,0),!0)?mn.TreeNode(s,l):Mt.Mk(Fr(s),l)}function Dr(e){e.removeAttribute("ws-template");let t=e.getAttribute("ws-replace");if(t!=null){e.removeAttribute("ws-replace");let r=e.parentNode;if(!N(r,null)){let l=globalThis.document.createElement(e.tagName);l.setAttribute("ws-replace",t),r.replaceChild(l,e)}}let n=globalThis.document.createElement("div");return n.appendChild(e),n}function vs(e){let t=globalThis.document.createElement("div");for(;e.hasChildNodes();)t.appendChild(e.firstChild);return t}function er(e){let t=globalThis.document.createElement("div"),n=e.content;for(let r=0,l=n.childNodes.length-1;r<=l;r++)t.appendChild(n.childNodes[r].cloneNode(!0));return t}function ne(e,t,n,r){let l=new it("New_3");function s(m,g){for(;;)switch(m){case 0:if(g!==null){let c=g.nextSibling;N(g.nodeType,Node.TEXT_NODE)?co(g):N(g.nodeType,Node.ELEMENT_NODE)&&i(g),g=c}else return null;break;case 1:let S=bt(g.nodeName,p(3),null).toLowerCase(),T=S.indexOf("."),_=T===-1?[e,S]:[bt(S,null,p(T-1)),bt(S,p(T+1),null)],E=_[1],f=_[0];if(f!=""&&!se().ContainsKey(f))return cr(E);{f==""&&r!=null&&r.$0(E);let c=se().Item(f);if(c.ContainsKey(E)){let h=c.Item(E).cloneNode(!0),$=new it("New_3"),y=new ot("New_5"),v=g.attributes;for(let A=0,D=v.length-1;A<=D;A++){let k=v.item(A).name.toLowerCase(),J=v.item(A).nodeValue,B=J==""?k:J.toLowerCase();y.set_Item(k,B),$.SAdd(k)||console.warn("Hole mapped twice",k)}for(let A=0,D=g.childNodes.length-1;A<=D;A++){let k=g.childNodes[A];N(k.nodeType,Node.ELEMENT_NODE)&&($.SAdd(k.nodeName.toLowerCase())||console.warn("Hole filled twice",E))}let x=g.childNodes.length===1&&N(g.firstChild.nodeType,Node.TEXT_NODE);if(x){let A=ao(h,g.firstChild.textContent,E),D=(J=>B=>J.SAdd(B))($);(J=>B=>{B!=null&&J(B.$0)})(J=>{D(J)})(A)}if(fo(h,$),!x)for(let A=0,D=g.childNodes.length-1;A<=D;A++){let k=g.childNodes[A];N(k.nodeType,Node.ELEMENT_NODE)&&(k.hasAttributes()?ho(h,k):o(h,k))}po(h,y),ar(h,g.parentNode,g),g.parentNode.removeChild(g);return}else return cr(E)}break}}function o(m,g){let S=g.nodeName.toLowerCase(),T=(E,f)=>{if(S=="title"&&g.hasChildNodes()){let c=mo(g.textContent);for(g.removeChild(g.firstChild);c.hasChildNodes();)g.appendChild(c.firstChild)}return i(g),ar(g,E,f)};Z(m,"[ws-attr-holes]",E=>{let f=mt(E.getAttribute("ws-attr-holes"),[" "],1);for(let c=0,a=f.length-1;c<=a;c++){let h=b(f,c),$=new RegExp("\\${"+S+"}","ig"),y=E.getAttribute(h).replace($,g.textContent);E.setAttribute(h,y)}});let _=m.querySelector("[ws-hole="+S+"]");if(N(_,null)){let E=m.querySelector("[ws-replace="+S+"]");if(N(E,null)){let f=m.querySelector("slot[name="+S+"]");return m.tagName.toLowerCase()=="template"?(T(f.parentNode,f),void f.parentNode.removeChild(f)):null}else{T(E.parentNode,E),E.parentNode.removeChild(E);return}}else{for(;_.hasChildNodes();)_.removeChild(_.lastChild);return _.removeAttribute("ws-hole"),T(_,null)}}function i(m){m.hasAttribute("ws-preserve")||(fn(m.nodeName.toLowerCase(),"ws-")?d(m):(Br(m),u(m.firstChild)))}function u(m){return s(0,m)}function d(m){return s(1,m)}function w(m){for(;;){let g=m.querySelector("[ws-template]");if(N(g,null)){let S=m.querySelector("[ws-children-template]");if(N(S,null)){let T=m.querySelectorAll("template[id]");for(let E=1,f=T.length-1;E<=f;E++){let c=T[E];l.Contains(c)||(ne(e,p(c.getAttribute("id")),c,null),l.SAdd(c))}let _=m.querySelectorAll("template[name]");for(let E=1,f=_.length-1;E<=f;E++){let c=_[E];l.Contains(c)||(ne(e,p(c.getAttribute("name")),c,null),l.SAdd(c))}return null}else{let T=S.getAttribute("ws-children-template");S.removeAttribute("ws-children-template"),ne(e,p(T),S,null),m=m}}else{let S=g.getAttribute("ws-template");xs(e,p(S),g)(null),m=m}}}let C=(t==null?"":t.$0).toLowerCase();Fe(e).set_Item(C,n),n.hasChildNodes()&&(w(n),u(n.firstChild))}function bs(e,t){let n,r=[],l=[],s=[],o=[],i=new ot("New_5"),u=V(t);try{for(;u.MoveNext();){let c=u.Current;i.set_Item(c.Name,c)}}finally{typeof u=="object"&&P(u)&&u.Dispose()}let d=fr(e),w=(c,a)=>{let h=Jr(c,a);l.push(Kr(h)),s.push([c,h]);let $=Lt(h.OnAfterRender);if($==null)return null;{let y=$.$0;o.push(()=>{y(c)});return}},C=c=>{let a,h=(a=null,[i.TryGetValue(c,{get:()=>a,set:$=>{a=$}}),a]);if(h[0]){let $=h[1];if($ instanceof wn)return p($.Value);if($ instanceof yn)return p(Mt.TextNode($.Value));{let y=$.ForTextView();return y==null?null:p(Mt.TextView(y.$0))}}else return null};Z(e,"[ws-hole]",c=>{let a=c.getAttribute("ws-hole");for(c.removeAttribute("ws-hole");c.hasChildNodes();)c.removeChild(c.lastChild);let h=C(a);if(h!=null&&h.$==1){let $=h.$0;hr(c,$.docNode),r.push(qt.New(Be(c),$.docNode,null,c,re(),null)),l.push($.updates)}}),Z(e,"[ws-replace]",c=>{let a=C(c.getAttribute("ws-replace"));if(a!=null&&a.$==1){let h=a.$0,$=c.parentNode,y=globalThis.document.createTextNode("");$.replaceChild(y,c);let v=Oo(y,h.docNode);d=fr(e);let x=kr(A=>c===A,d);x==null||Nr(d,x.$0,h.docNode),r.push(qt.New(Be($),h.docNode,p([v,y]),$,re(),null)),l.push(h.updates)}});let m=!1;Z(e,"slot",c=>{let a=c.getAttribute("name"),h=a==""||a==null?"default":a.toLowerCase();if(!(m&&h=="default"||!N(e.parentElement,null))){for(;c.hasChildNodes();)c.removeChild(c.lastChild);h=="default"&&(m=!0);let $=C(h);if($!=null&&$.$==1){let y=$.$0;hr(c,y.docNode),r.push(qt.New(Be(c),y.docNode,null,c,re(),null)),l.push(y.updates)}}}),Z(e,"[ws-attr]",c=>{let a,h=c.getAttribute("ws-attr");c.removeAttribute("ws-attr");let $=(a=null,[i.TryGetValue(h,{get:()=>a,set:y=>{a=y}}),a]);if($[0]){let y=$[1];y instanceof Cn?w(c,y.Value):console.warn("Attribute hole filled with non-attribute data",h)}}),Z(e,"[ws-on]",c=>{w(c,$t.Concat(Dn(a=>{let h,$=mt(a,[":"],1),y=(h=null,[i.TryGetValue(b($,1),{get:()=>h,set:v=>{h=v}}),h]);if(y[0]){let v=y[1];return v instanceof Nn?p(Zo(b($,0),v.Value)):v instanceof vn?p($t.Handler(b($,0),v.Value)):(console.warn("Event hole on"+b($,0)+" filled with non-event data",b($,1)),null)}else return null},mt(c.getAttribute("ws-on"),[" "],1)))),c.removeAttribute("ws-on")}),Z(e,"[ws-onafterrender]",c=>{let a,h=c.getAttribute("ws-onafterrender"),$=(a=null,[i.TryGetValue(h,{get:()=>a,set:y=>{a=y}}),a]);if($[0]){let y=$[1];y instanceof bn||y instanceof An?(c.removeAttribute("ws-onafterrender"),w(c,pr(y.Value))):console.warn("onafterrender hole filled with non-onafterrender data",h)}}),Z(e,"[ws-var]",c=>{let a,h=c.getAttribute("ws-var");c.removeAttribute("ws-var");let $=(a=null,[i.TryGetValue(h,{get:()=>a,set:y=>{a=y}}),a]);$[0]&&$[1].AddAttribute(y=>v=>w(y,v),c)});let g=()=>{Ss("[ws-dom]",c=>{let a,h,$,y=(a=null,[i.TryGetValue(c.getAttribute("ws-dom").toLowerCase(),{get:()=>a,set:v=>{a=v}}),a]);if(y[0]){let v=y[1];if(v instanceof xe){let x=v.Value;c.removeAttribute("ws-dom"),h=c;let A=new MutationObserver((D,k)=>{lt(J=>{J.removedNodes.forEach(zn(B=>B[0]===h&&J.addedNodes.length!==1?(x.SetFinal(null),k.disconnect()):null),null)},D)});c.parentElement!==null&&A.observe(c.parentElement,($={},$.childList=!0,$)),x.Set(p(c)),qr(D=>{if(D!=null&&D.$==1){let k=D.$0;h===k||(h.replaceWith(k),h=k)}else h.remove(),A.disconnect()},x.View)}}})};Z(e,"[ws-attr-holes]",c=>{let a=new RegExp(oe(),"g"),h=mt(c.getAttribute("ws-attr-holes"),[" "],1);c.removeAttribute("ws-attr-holes");for(let $=0,y=h.length-1;$<=y;$++)(()=>{let v,x=b(h,$),A=c.getAttribute(x),D=null,k=0,J=[];for(;D=a.exec(A),D!==null;){let K=bt(A,p(k),p(a.lastIndex-b(D,0).length-1));k=a.lastIndex,J.push([K,b(D,1)])}let B=bt(A,p(k),null);a.lastIndex=0;let I=Ln((K,nt)=>(ct=>{let M=ct[0],al=ct[1];return Hn=>{let ge,Pe=Hn[0],Bn=Hn[1],Jn=(ge=null,[i.TryGetValue(al,{get:()=>ge,set:Ue=>{ge=Ue}}),ge]),we=Jn[0]?Jn[1].AsChoiceView:Rn("");return we.$==1?[M,W.Cons(Pe==""?we.$0:q(Ue=>Ue+Pe,we.$0),Bn)]:[M+we.$0+Pe,Bn]}})(K)(nt),J,[B,W.Empty]);if(I[1].$==1)if(I[1].$1.$==1)if(I[1].$1.$1.$==1)if(I[1].$1.$1.$1.$==0){let K=I[0];v=te(x,so((nt,ct,M)=>K+nt+ct+M,I[1].$0,I[1].$1.$0,I[1].$1.$1.$0))}else{let K=I[0];v=te(x,q(nt=>K+Jt("",nt),oo(I[1])))}else{let K=I[0];v=te(x,io((nt,ct)=>K+nt+ct,I[1].$0,I[1].$1.$0))}else if(I[0]=="")v=te(x,I[1].$0);else{let K=I[0];v=te(x,q(nt=>K+nt,I[1].$0))}else v=$t.Create(x,I[0]);return w(c,v)})()});let S=d,T=o.length==0?p(()=>{g()}):p(c=>{g(),lt(a=>{a(c)},o)}),_=!N(d,null)&&d.length===1&&b(d,0)instanceof Node&&b(d,0)instanceof Element&&(n=b(d,0),!0)?p(n):null,E={Els:S,Dirty:!0,Holes:r,Attrs:s,Render:T?T.$0:void 0,El:_?_.$0:void 0};return[Kn(E,["Render","El"]),Ge(ie(),Ee,l)]}function As(){return Qt.GlobalHoles}function Z(e,t,n){No(e,t,r=>{r.closest("[ws-preserve]")==null&&n(r)})}function xs(e,t,n){let r=Dr(n);return l=>{ne(e,t,r,l)}}function Ss(e,t){vo(e,n=>{n.closest("[ws-preserve]")==null&&t(n)})}function oe(){return Qt.TextHoleRE}function Ts(){throw new hn("New")}function Fr(e){return{$:6,$0:e}}function Es(e){return{$:5,$0:e}}function _s(e){return{$:4,$0:e}}var ln=class extends Xe{isConst;current;snap;view;id;get View(){return this.view}Set(t){this.isConst?(n=>n("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))(n=>{console.log(n)}):(ue(this.snap),this.current=t,this.snap={s:Oe(t,[])})}SetFinal(t){this.isConst?(n=>n("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))(n=>{console.log(n)}):(ue(this.snap),this.isConst=!0,this.current=t,this.snap={s:Tt(t)})}Get(){return this.current}UpdateMaybe(t){let n=t(this.Get());n!=null&&n.$==1&&this.Set(n.$0)}constructor(t,n,r){super(),this.isConst=t,this.current=r,this.snap=n,this.view=()=>this.snap,this.id=re()}};function ks(e,t,n){let r=e.s;r==null?n():r!=null&&r.$==2?(r.$1.push(n),t(r.$0)):r!=null&&r.$==3?(r.$0.push(t),r.$1.push(n)):t(r.$0)}function Zt(e,t){let n=t.s;if(n!=null&&n.$==0)return{s:Tt(e(n.$0))};{let r={s:Xt([],[])};return pt(t,l=>{Or(r,t,e(l))},r),r}}function Vs(e,t,n,r){let l=t.s,s=n.s,o=r.s;if(l!=null&&l.$==0)return s!=null&&s.$==0?o!=null&&o.$==0?{s:Tt(e(l.$0,s.$0,o.$0))}:Fs(e,l.$0,s.$0,r):o!=null&&o.$==0?Ls(e,l.$0,o.$0,n):Os(e,l.$0,n,r);if(s!=null&&s.$==0)return o!=null&&o.$==0?Gs(e,s.$0,o.$0,t):Rs(e,s.$0,t,r);if(o!=null&&o.$==0)return Ws(e,o.$0,t,n);{let i={s:Xt([],[])},u=()=>{let d=i.s;if(!(d!=null&&d.$==0||d!=null&&d.$==2)){let w=Vt(t),C=Vt(n),m=Vt(r);w!=null&&w.$==1&&C!=null&&C.$==1&&m!=null&&m.$==1&&(w.$0[1]&&C.$0[1]&&m.$0[1]?de(i,e(w.$0[0],C.$0[0],m.$0[0])):pe(i,e(w.$0[0],C.$0[0],m.$0[0])))}};return pt(t,u,i),pt(n,u,i),pt(r,u,i),i}}function Is(e){let t=At(e);if(t.length==0)return{s:Tt([])};{let n={s:Xt([],[])},r=[L(t)-1],l=()=>{if(r[0]===0){let s=St(o=>{let i=o.s;return i!=null&&i.$==0||i!=null&&i.$==2?i.$0:X("value not found by View.Sequence")},t);Mr(o=>{let i=o.s;return i!=null&&i.$==0},t)?de(n,s):pe(n,s)}else r[0]=r[0]-1};return lt(s=>{pt(s,l,n)},t),n}}function Le(e,t,n){let r=t.s,l=n.s;if(r!=null&&r.$==0)return l!=null&&l.$==0?{s:Tt(e(r.$0,l.$0))}:Ps(e,r.$0,n);if(l!=null&&l.$==0)return Us(e,l.$0,t);{let s={s:Xt([],[])},o=()=>{let i=s.s;if(!(i!=null&&i.$==0||i!=null&&i.$==2)){let u=Vt(t),d=Vt(n);u!=null&&u.$==1&&d!=null&&d.$==1&&(u.$0[1]&&d.$0[1]?de(s,e(u.$0[0],d.$0[0])):pe(s,e(u.$0[0],d.$0[0])))}};return pt(t,o,s),pt(n,o,s),s}}function Ms(e,t){let n=e.s,r=t.s;if(n!=null&&n.$==0)return r!=null&&r.$==0?{s:Tt(null)}:t;if(r!=null&&r.$==0)return e;{let l={s:Xt([],[])},s=()=>{let o=l.s;if(!(o!=null&&o.$==0||o!=null&&o.$==2)){let i=Vt(e),u=Vt(t);i!=null&&i.$==1&&u!=null&&u.$==1&&(i.$0[1]&&u.$0[1]?de(l,null):pe(l,null))}};return pt(e,s,l),pt(t,s,l),l}}function Ds(e){let t=e.s;if(t==null)return e;if(t!=null&&t.$==2){let n={s:Oe(t.$0,[])};return qs(e,n),n}else if(t!=null&&t.$==3){let n={s:Xt([],[])};return pt(e,r=>{Or(n,e,r)},n),n}else return e}function Lr(e,t){let n=e.s;n==null?t():(n!=null&&n.$==2||n!=null&&n.$==3)&&n.$1.push(t)}function pt(e,t,n){let r=e.s;r==null?ue(n):r!=null&&r.$==2?(Se(r.$1,n),t(r.$0)):r!=null&&r.$==3?(r.$0.push(t),Se(r.$1,n)):t(r.$0)}function Or(e,t,n){let r=t.s;r!=null&&r.$==0?de(e,n):pe(e,n)}function Fs(e,t,n,r){return Zt(l=>e(t,n,l),r)}function Ls(e,t,n,r){return Zt(l=>e(t,l,n),r)}function Os(e,t,n,r){return Le((l,s)=>e(t,l,s),n,r)}function Gs(e,t,n,r){return Zt(l=>e(l,t,n),r)}function Rs(e,t,n,r){return Le((l,s)=>e(l,t,s),n,r)}function Ws(e,t,n,r){return Le((l,s)=>e(l,s,t),n,r)}function Vt(e){let t=e.s;return t!=null&&t.$==0?p([t.$0,!0]):t!=null&&t.$==2?p([t.$0,!1]):null}function de(e,t){let n=e.s;if(n!=null&&n.$==3){e.s=Tt(t);let r=n.$0;for(let l=0,s=L(r)-1;l<=s;l++)b(r,l)(t)}}function pe(e,t){let n=e.s;if(n!=null&&n.$==3){e.s=Oe(t,n.$1);let r=n.$0;for(let l=0,s=L(r)-1;l<=s;l++)b(r,l)(t)}}function Ps(e,t,n){return Zt(r=>e(t,r),n)}function Us(e,t,n){return Zt(r=>e(r,t),n)}function qs(e,t){let n=e.s;n==null?ue(t):(n!=null&&n.$==2||n!=null&&n.$==3)&&Se(n.$1,t)}function Se(e,t){if(e.push(t),e.length%20===0){let n=e.slice(0);nu(e);for(let r=0,l=L(n)-1;r<=l;r++){let s=b(n,r);typeof s=="object"?(o=>{o.s&&e.push(o)})(s):(o=>{e.push(o)})(s)}}}var sn=class extends H{idle;robin;Fork(t){this.robin.push(t),this.idle&&(this.idle=!1,setTimeout(()=>{this.tick()},0))}tick(){let t=Date.now(),n=!0;for(;n;)this.robin.length===0?(this.idle=!0,n=!1):(this.robin.shift()(),Date.now()-t>40&&(setTimeout(()=>{this.tick()},0),n=!1))}constructor(){super(),this.idle=!0,this.robin=[]}},on=class extends H{init;c;pending;r;constructor(){super(),this.c=!1,this.pending=null,this.r=[],this.init=1}},un=class e{same;json1Value;json2Value;forMerge;children;get actualSame(){let t;if(console.log(j("Comparing objects: {0} = {1}",[this.json1Value,this.json2Value])),this.same){t=!0;let n=V(this.children);try{for(;n.MoveNext();)yt(n.Current)[1].same||(t=!1)}finally{typeof n=="object"&&P(n)&&n.Dispose()}return t}else return!1}static New(t,n,r,l,s){return O(e,{same:t,json1Value:n,json2Value:r,forMerge:l,children:s})}},U=class e{get json1Value(){return this.$==1?this.$0.json1Value:this.$==2?this.$0.json1Value:this.$==3?this.$0.json1Value:this.$0.json1Value}get json2Value(){return this.$==1?this.$0.json2Value:this.$==2?this.$0.json2Value:this.$==3?this.$0.json2Value:this.$0.json2Value}get same(){return this.$==1?this.$0.actualSame:this.$==2?this.$0.same:this.$==3?this.$0.same:this.$0.actualSame}static PrimitiveComparison(t){return O(e,{$:2,$0:t})}static TypeMismatchComparison(t){return O(e,{$:3,$0:t})}static ObjectComparison(t){return O(e,{$:0,$0:t})}static ArrayComparison(t){return O(e,{$:1,$0:t})}},cn=class e{same;json1Value;json2Value;forMerge;items;get actualSame(){let t;if(console.log(j("Comparing arrays: {0} = {1}",[this.json1Value,this.json2Value])),this.same){t=!0;let n=this.items;for(let r=0,l=n.length-1;r<=l;r++)b(n,r).same||(t=!1);return t}else return!1}static New(t,n,r,l,s){return O(e,{same:t,json1Value:n,json2Value:r,forMerge:l,items:s})}};function at(e,t,n,r,l,s){return{same:e,json1Value:t,json2Value:n,forMerge:r,children1:l,children2:s}}function Gt(e,t,n,r){return{same:e,json1Value:t,json2Value:n,forMerge:r}}function an(e){return e.replace(new RegExp("^\\s+"),"").replace(new RegExp("\\s+$"),"")}function Pt(e,t){return Vr(e,t).join("")}function _t(e,t,n){function r(l){let s=l.indexOf(t);if(s!==-1){let o=Hs(l,t,n),i=s+n.length;return Bs(o,0,s+n.length)+r(o.substring(i))}else return l}return r(e)}function Hs(e,t,n){return e.replace(t,n)}function Jt(e,t){return At(t).join(e)}function j(e,t){return e.replace(new RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),(n,r,l)=>{let s=String(b(t,+r));if(N(l,void 0))return s;{let o=+l,i=Math.abs(o);return i>s.length?o>0?zs(s,i):Zs(s,i):s}})}function Bs(e,t,n){return e.substr(t,n)}function mt(e,t,n){return Js(e,new RegExp("["+Ks(t.join(""))+"]"),n)}function fn(e,t){return e.substring(0,t.length)==t}function Js(e,t,n){return n===1?he(r=>r!=="",nr(e,t)):nr(e,t)}function Ks(e){return e.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&")}function zs(e,t){return Xs(e,t," ")}function Zs(e,t){return Qs(e,t," ")}function nr(e,t){return e.split(t)}function Xs(e,t,n){return t>e.length?Array(t-e.length+1).join(n)+e:e}function Qs(e,t,n){return t>e.length?e+Array(t-e.length+1).join(n):e}function Ys(e,t){return as(e,js(t))}function js(e){return e??""}function z(e,t){let n;switch(e.$==3?t.$==2?(n=[t.$1,e.$0,t.$0],3):t.$==1?(n=[t.$1,e.$0,t.$0],5):t.$==3?(n=[e.$0,t.$0],15):(n=[e.$0,t.$0,t.$1],2):e.$==2?t.$==2?e.$0==t.$0?(n=[e.$1,t.$1,e.$0,t.$0],8):16:t.$==1?(n=[t.$1,e.$1,e.$0,t.$0],10):t.$==0?(n=[e.$1,e.$0,t.$0,t.$1],14):(n=[e.$1,e.$0,t.$0],4):e.$==1?t.$==1?e.$0==t.$0?(n=[e.$1,t.$1,e.$0,t.$0],7):16:t.$==2?(n=[e.$1,t.$1,e.$0,t.$0],9):t.$==0?(n=[e.$1,e.$0,t.$0,t.$1],12):(n=[e.$1,e.$0,t.$0],6):t.$==3?(n=[e.$0,t.$0,e.$1],1):t.$==1?(n=[t.$1,e.$0,t.$0,e.$1],11):t.$==2?(n=[t.$1,e.$0,t.$0,e.$1],13):e.$0==t.$0?(n=[e.$0,t.$0,e.$1,t.$1],0):16){case 0:let r=n[0],l=n[1],s=n[2],o=n[3];console.log(j("Comparing primitives: {0} = {1}",[r,l]));let i=N(s,o);return U.PrimitiveComparison(Gt(i,ht(r,s),ht(l,o),i?ht(r,s):R(r)));case 1:let u=n[0],d=n[1],w=n[2];return console.log(j("Comparing nulls: {0} = {1}",[u,d])),U.PrimitiveComparison(Gt(!1,ht(u,w),R(d),ht(u,w)));case 2:let C=n[0],m=n[1],g=n[2];return console.log(j("Comparing nulls: {0} = {1}",[C,m])),U.PrimitiveComparison(Gt(!1,R(C),ht(m,g),ht(m,g)));case 3:return U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),null,p(z(t,t))));case 4:return U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),p(z(e,e)),null));case 5:return U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),null,p(z(t,t))));case 6:return U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),p(z(e,e)),null));case 7:let S=n[0],T=n[1],_=n[2],E=n[3];console.log(j("Comparing objects: {0} = {1}",[_,E]));let f=ir(or(Te,S)),c=ir(or(Te,T)),a=ro(f,c),h=Sr((B,I)=>{let K,nt=tr(M=>(M.$==1||M.$==2||M.$==3,M.$0==I),S),ct=tr(M=>(M.$==1||M.$==2||M.$==3,M.$0==I),T);if(nt==null)if(ct==null)K=X("Unexpected empty key");else{let M=ct.$0;K=U.PrimitiveComparison(Gt(!1,R(I),M,M))}else if(ct==null){let M=nt.$0;K=M.$==1||M.$==2?z(M,R(I)):U.PrimitiveComparison(Gt(!1,M,R(I),M))}else K=z(nt.$0,ct.$0);return B.Add_1(I,K)},new pn("New",[]),a);return U.ObjectComparison(un.New(N(f,c),ve(_,S),ve(E,T),ve(_,S),h));case 8:let $=n[0],y=n[1],v=n[2],x=n[3];console.log(j("Comparing arrays: {0} = {1}",[v,x]));let A=Rt($)===Rt(y),D=Rt($),k=Rt(y),J=gt(D,k)===1?D:k;return U.ArrayComparison(cn.New(A,be(v,$),be(x,y),be(v,$),Fn(no(z,Kt(Dt(()=>rt(B=>B<Rt($)?$.get_Item(B):R("padded"),le(0,J-1)))),Kt(Dt(()=>rt(B=>B<Rt(y)?y.get_Item(B):R("padded"),le(0,J-1))))))));case 9:return console.log(j("Comparing objects: {0} = {1}",[n[2],n[3]])),U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),p(z(e,e)),p(z(t,t))));case 10:return console.log(j("Comparing arrays: {0} = {1}",[n[2],n[3]])),U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),p(z(e,e)),p(z(t,t))));case 11:return console.log(j("Comparing primitives: {0} = {1}",[n[1],n[2]])),U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),null,p(z(t,t))));case 12:return console.log(j("Comparing primitives: {0} = {1}",[n[1],n[2]])),U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),p(z(e,e)),null));case 13:return console.log(j("Comparing primitives: {0} = {1}",[n[1],n[2]])),U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),null,p(z(t,t))));case 14:return console.log(j("Comparing arrays: {0} = {1}",[n[1],n[2]])),U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),p(z(e,e)),null));case 15:return console.log(j("Comparing nulls: {0} = {1}",[n[0],n[1]])),U.PrimitiveComparison(Gt(!0,e,t,e));case 16:return console.log(j("Comparing different types: {0} = {1}",[e,t])),U.TypeMismatchComparison(at(!1,e,t,R("typeMismatch"),null,null))}}function rr(e){let t=JSON.parse(e);function n(r){return l=>{if(l==null)return R(r);{let s=typeof l;if(s=="string")return ht(r,l);if(s=="number")return Number.isInteger(l),ht(r,l);if(s=="boolean")return ht(r,l);if(s=="object"){if(Array.isArray(l))return be(r,Kt(Dt(()=>rt(o=>n("["+String(o)+"]")(b(l,o)),le(0,L(l)-1)))));{let o=Object.keys(l);return ve(r,Kt(Dt(()=>rt(i=>n(i)(l[i]),o))))}}else return R(r)}}}return n("root")(t)}function Te(e){return e.$==1||e.$==2||e.$==3,p(e.$0)}function lr(e){return e.$==1||e.$==2||e.$==3?"":String(e.$1)}function V(e){return e instanceof Array?Gr(e):N(typeof e,"string")?Rr(e):e.GetEnumerator()}function Gr(e){return new ut(0,null,t=>{let n=t.s;return n<L(e)&&(t.c=b(e,n),t.s=n+1,!0)},void 0)}function Rr(e){return new ut(0,null,t=>{let n=t.s;return n<e.length&&(t.c=e[n],t.s=n+1,!0)},void 0)}function to(e){return e instanceof Array?Gr(e):N(typeof e,"string")?Rr(e):"GetEnumerator0"in e?e.GetEnumerator0():e.GetEnumerator()}var ut=class extends H{s;c;n;d;e;MoveNext(){let t=this.n(this);return this.e=t?1:2,t}get Current(){return this.e===1?this.c:this.e===0?X("Enumeration has not started. Call MoveNext."):X("Enumeration already finished.")}Dispose(){this.d&&this.d(this)}constructor(t,n,r,l){super(),this.s=t,this.c=n,this.n=r,this.d=l,this.e=0}},hn=class extends Error{static New(){return new this("New")}static New_1(t){return new this("New_1",t)}constructor(t,n){if(t=="New"&&(t="New_1",n="The given key was not present in the dictionary."),t=="New_1"){let r=n;super(r)}}},qt=class e{Attr;Children;Delimiters;El;ElKey;Render;Equals(t){return this.ElKey===t.ElKey}GetHashCode(){return this.ElKey}static New(t,n,r,l,s,o){let i={Attr:t,Children:n,El:l,ElKey:s},u=(Ot(i,"Delimiters",r),Ot(i,"Render",o),i);return O(e,u)}};function re(){return eo(sr()+1),sr()}function eo(e){Pn.counter=e}function sr(){return Pn.counter}function Oe(e,t){return{$:2,$0:e,$1:t}}function Tt(e){return{$:0,$0:e}}function Xt(e,t){return{$:3,$0:e,$1:t}}var dn=class extends Error{ct;static New(t){return new this("New",t)}static New_1(t,n,r){return new this("New_1",t,n,r)}constructor(t,n,r,l){let s;if(t=="New"&&(s=n,t="New_1",n="The operation was canceled.",r=null,l=s),t=="New_1"){let o=n,i=r,u=l;super(o),this.inner=i,this.ct=u}}};function ht(e,t){return{$:0,$0:e,$1:t}}function R(e){return{$:3,$0:e}}function ve(e,t){return{$:1,$0:e,$1:t}}function be(e,t){return{$:2,$0:e,$1:t}}var pn=class e extends H{tree;Equals(t){return this.Count===t.Count&&Yl(N,this,t)}Add_1(t,n){return new e("New_1",ui(_e.New(t,n),this.tree))}get Count(){let t=this.tree;return t==null?0:t.Count}GetEnumerator(){return V(rt(t=>({K:t.Key,V:t.Value}),ai(!1,this.tree)))}GetHashCode(){return It(At(this))}CompareTo0(t){return os(gt,this,t)}static New(t){return new this("New",t)}static New_1(t){return new this("New_1",t)}constructor(t,n){let r;if(t=="New"&&(r=n,t="New_1",n=ii(r)),t=="New_1"){let l=n;super(),this.tree=l}}};function or(e,t){return Kt(Zl(e,t))}function ir(e){return Kt(Xl(e))}function Rt(e){let t=e,n=0;for(;t.$==1;)t=Pr(t),n=n+1;return n}function no(e,t,n){let r,l,s,o=t.$==1&&n.$==1;if(o){let i=O(W,{$:1});for(r=i,l=t,s=n;o;)if(r.$0=e(l.$0,s.$0),l=l.$1,s=s.$1,l.$==1&&s.$==1){let u=O(W,{$:1});r=(r.$1=u,u)}else o=!1;return(l.$==1||s.$==1)&&ur(),r.$1=W.Empty,i}else return t.$==1||n.$==1?ur():t}function Kt(e){if(e instanceof W)return e;if(e instanceof Array)return Wr(e);{let t=V(e);try{let n,r=t.MoveNext();if(r){let l=O(W,{$:1});for(n=l;r;)if(n.$0=t.Current,t.MoveNext()){let s=O(W,{$:1});n=(n.$1=s,s)}else r=!1;return n.$1=W.Empty,l}else return W.Empty}finally{typeof t=="object"&&P(t)&&t.Dispose()}}}function ro(e,t){let n,r,l;if(e.$==0)return t;if(t.$==0)return e;{let s=O(W,{$:1});for(n=s,r=e,l=!0;l;)if(n.$0=r.$0,r=r.$1,r.$==0)l=!1;else{let o=O(W,{$:1});n=(n.$1=o,o)}return n.$1=t,s}}function ur(){return X("The lists have different lengths.")}function Wr(e){let t=W.Empty;for(let n=L(e)-1,r=0;n>=r;n--)t=W.Cons(b(e,n),t);return t}function Pr(e){return e.$==1?e.$1:Ur()}function Ur(){return X("The input list was empty.")}function lo(e){return e.$==1?e.$0:Ur()}var W=class e{get_Item(t){return ss(t,this)}static Empty=O(e,{$:0});static Cons(t,n){return O(e,{$:1,$0:t,$1:n})}GetEnumerator(){return new ut(this,null,t=>{let n=t.s;return n.$==0?!1:(t.c=n.$0,t.s=n.$1,!0)},void 0)}},Qt=st(e=>class{static{Qt=e(this)}static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static{this.LoadedTemplates=new ot("New_5"),this.LocalTemplatesLoaded=!1,this.GlobalHoles=new ot("New_5"),this.TextHoleRE="\\${([^}]+)}",this.RenderedFullDocTemplate=null}}),mn=class e extends Mt{docNode_1;updates_1;elt;rvUpdates;static TreeNode(t,n){let r=xn.Create(n),l=St(i=>Kr(i[1]),t.Attrs),s=Ge(ie(),Ee,l),o=Ee(s,r.v);return new e(Fr(t),o,b(t.Els,0),r)}constructor(t,n,r,l){super(t,n),this.docNode_1=t,this.updates_1=n,this.elt=r,this.rvUpdates=l}};function ie(e){let t={s:Tt(e)};return()=>t}function qr(e,t){function n(){ks(t(),e,()=>{Bt().Fork(n)})}Bt().Fork(n)}function q(e,t){return me(()=>Zt(e,t()))}function so(e,t,n,r){return me(()=>Vs(e,t(),n(),r()))}function oo(e){return me(()=>Is(rt(t=>t(),e)))}function io(e,t,n){return me(()=>Le(e,t(),n()))}function Ee(e,t){return me(()=>Ms(e(),t()))}function me(e){let t={c:null,o:e};return()=>{let n=t.c;if(n===null){n=t.o(),t.c=n;let r=n.s;return r!=null&&r.$==0?t.o=null:Lr(n,()=>{t.c=null}),n}else return n}}function Hr(e,t,n,r){let l={DynElem:e,DynFlags:t,DynNodes:n};return Ot(l,"OnAfterRender",r),l}function ue(e){let t,n=e.s;if(!(n==null||(!(n!=null&&n.$==2||n!=null&&n.$==3)||(t=n.$1,!1)))){e.s=null;for(let r=0,l=L(t)-1;r<=l;r++){let s=b(t,r);typeof s=="object"?(o=>{ue(o)})(s):s()}}}function uo(e,t,n,r,l){return{Node:e,Left:t,Right:n,Height:r,Count:l}}var _e=class e{Key;Value;Equals(t){return N(this.Key,t.Key)}GetHashCode(){return It(this.Key)}CompareTo0(t){return gt(this.Key,t.Key)}static New(t,n){return O(e,{Key:t,Value:n})}};function co(e){let t=null,n=0,r=e.textContent,l=new RegExp(oe(),"g");for(;t=l.exec(r),t!==null;){e.parentNode.insertBefore(globalThis.document.createTextNode(bt(r,p(n),p(l.lastIndex-b(t,0).length-1))),e),n=l.lastIndex;let s=globalThis.document.createElement("span");s.setAttribute("ws-replace",b(t,1).toLowerCase()),e.parentNode.insertBefore(s,e)}l.lastIndex=0,e.textContent=bt(r,p(n),null)}function cr(e){console.warn("Instantiating non-loaded template",e)}function ao(e,t,n){let r=e.querySelector("[ws-replace]");return N(r,null)?(console.warn("Filling non-existent text hole",n),null):(r.parentNode.replaceChild(globalThis.document.createTextNode(t),r),p(r.getAttribute("ws-replace")))}function fo(e,t){let n=r=>{Z(e,"["+r+"]",l=>{t.Contains(l.getAttribute(r))||l.removeAttribute(r)})};n("ws-attr"),n("ws-onafterrender"),n("ws-var"),Z(e,"[ws-hole]",r=>{if(!t.Contains(r.getAttribute("ws-hole")))for(r.removeAttribute("ws-hole");r.hasChildNodes();)r.removeChild(r.lastChild)}),Z(e,"[ws-replace]",r=>{t.Contains(r.getAttribute("ws-replace"))||r.parentNode.removeChild(r)}),Z(e,"[ws-on]",r=>{r.setAttribute("ws-on",Jt(" ",he(l=>t.Contains(b(mt(l,[":"],1),1)),mt(r.getAttribute("ws-on"),[" "],1))))}),Z(e,"[ws-attr-holes]",r=>{let l=mt(r.getAttribute("ws-attr-holes"),[" "],1);for(let s=0,o=l.length-1;s<=o;s++){let i=b(l,s),u=new RegExp(oe(),"g"),d=r.getAttribute(i).replace(u,(w,C)=>t.Contains(C)?w:"");r.setAttribute(i,d)}})}function ho(e,t){Br(t);let n=t.nodeName.toLowerCase(),r=e.querySelector("[ws-attr="+n+"]");if(N(r,null))console.warn("Filling non-existent attr hole",n);else{r.removeAttribute("ws-attr");for(let l=0,s=t.attributes.length-1;l<=s;l++){let o=t.attributes.item(l);o.name=="class"&&r.hasAttribute("class")?r.setAttribute("class",r.getAttribute("class")+" "+o.nodeValue):r.setAttribute(o.name,o.nodeValue)}}}function po(e,t){let n=r=>{Z(e,"["+r+"]",l=>{let s,o=(s=null,[t.TryGetValue(l.getAttribute(r).toLowerCase(),{get:()=>s,set:i=>{s=i}}),s]);o[0]&&l.setAttribute(r,o[1])})};n("ws-hole"),n("ws-replace"),n("ws-attr"),n("ws-onafterrender"),n("ws-var"),Z(e,"[ws-on]",r=>{r.setAttribute("ws-on",Jt(" ",St(l=>{let s,o=mt(l,[":"],1),i=(s=null,[t.TryGetValue(b(o,1),{get:()=>s,set:u=>{s=u}}),s]);return i[0]?b(o,0)+":"+i[1]:l},mt(r.getAttribute("ws-on"),[" "],1))))}),Z(e,"[ws-attr-holes]",r=>{let l=mt(r.getAttribute("ws-attr-holes"),[" "],1);for(let s=0,o=l.length-1;s<=o;s++)(()=>{let i=b(l,s);return r.setAttribute(i,Sr((u,d)=>{let w=yt(d);return u.replace(new RegExp("\\${"+w[0]+"}","ig"),"${"+w[1]+"}")},r.getAttribute(i),t))})()})}function ar(e,t,n){for(;;)if(e.hasChildNodes())n=t.insertBefore(e.lastChild,n);else return null}function Br(e){let t=e.attributes,n=[],r=[],l=[];for(let o=0,i=t.length-1;o<=i;o++){let u=t.item(o);if(fn(u.nodeName,"ws-on")&&u.nodeName!="ws-onafterrender"&&u.nodeName!="ws-on")n.push(u.nodeName),r.push(bt(u.nodeName,p(5),null)+":"+u.nodeValue.toLowerCase());else if(!fn(u.nodeName,"ws-")&&new RegExp(oe()).test(u.nodeValue)){let d=new RegExp(oe(),"g"),w=u.nodeValue.replace(d,(C,m)=>"${"+m.toLowerCase()+"}");u.nodeValue=w,l.push(u.nodeName)}}r.length!=0&&e.setAttribute("ws-on",Jt(" ",r)),l.length!=0&&e.setAttribute("ws-attr-holes",Jt(" ",l));let s=o=>{let i=e.getAttribute(o);i==null||e.setAttribute(o,i.toLowerCase())};s("ws-hole"),s("ws-replace"),s("ws-attr"),s("ws-onafterrender"),s("ws-var"),lt(o=>{e.removeAttribute(o)},n)}function bt(e,t,n){if(t==null)if(n!=null&&n.$==1){let r=n.$0;return r<0?"":e.slice(0,r+1)}else return"";else{if(n==null)return e.slice(t.$0);{let r=n.$0;return r<0?"":e.slice(t.$0,r+1)}}}function mo(e){let t=globalThis.document.createElement("div");if($o().test(e)){let o=function(i,u){for(;;){if(u===0)return i;{let d=u;i=i.lastChild,u=d-1}}},n=Co().exec(e),r=N(n,null)?"":b(n,1).toLowerCase(),l=go()[r],s=l||wo();return t.innerHTML=s[1]+e.replace(yo(),"<$1></$2>")+s[2],o(t,s[0])}else return t.appendChild(globalThis.document.createTextNode(e)),t}function fr(e){let t=[];for(let n=0,r=e.childNodes.length-1;n<=r;n++)t.push(e.childNodes[n]);return t}function $o(){return jt.rhtml}function go(){return jt.wrapMap}function wo(){return jt.defaultWrap}function yo(){return jt.rxhtmlTag}function Co(){return jt.rtagName}function No(e,t,n){let r=e.querySelectorAll(t);for(let l=0,s=r.length-1;l<=s;l++)n(r[l])}function vo(e,t){let n=globalThis.document.querySelectorAll(e);for(let r=0,l=n.length-1;r<=l;r++)t(n[r])}function bo(e,t,n){let r;if(n.parentNode===e){let l=n.nextSibling,s=N(l,null)?null:l;r=t===s}else r=!1;r||e.insertBefore(n,t)}function Ao(e,t){t.parentNode===e&&e.removeChild(t)}function ke(){return X("The input sequence has an insufficient number of elements.")}function xo(){return X("The input must be non-negative.")}function So(e,t){for(let n=0,r=t.length-1;n<=r;n++)t[n]=e(n,t[n]);return t}function To(e,t){for(let n=0,r=t.length-1;n<=r;n++)t[n]=e(t[n])}function Eo(e,t){let n=!0,r=0;for(;n&&r<L(t);)N(t[r],e)?n=!1:r=r+1;return!n}var $n=class extends H{d;GetEnumerator(){return V(rt(t=>t.K,this.d))}constructor(t){super(),this.d=t}};function Jr(e,t){let n=[],r=[];function l(i){for(;;)if(i!==null){if(i!=null&&i.$==1)return n.push(i.$0);if(i!=null&&i.$==2){let u=i.$1,d=i.$0;l(d),i=u}else return i!=null&&i.$==3?i.$0(e):i!=null&&i.$==4?r.push(i.$0):null}else return null}l(t);let s=n.slice(0);return Hr(e,gn(t),s,r.length===0?null:p(i=>{es(u=>{u(i)},r)}))}function Kr(e){return ri(t=>t.NChanged,ie(),Ee,e.DynNodes)}function Be(e){return Hr(e,0,[],null)}function gn(e){return e!==null&&e.hasOwnProperty("flags")?e.flags:0}function Ve(e){return $t.A3(e)}function zr(e,t){return $t.A1(new En(e,t))}function _o(e,t){if(e===null)return t;if(t===null)return e;{let n=$t.A2(e,t);return Lo(n,gn(e)|gn(t)),n}}function Zr(){return G.EmptyAttr}function ko(e){return(e.DynFlags&2)===2}function Vo(e){return On(e,(t,n)=>t.NGetExitAnim(n))}function Io(e){return(e.DynFlags&1)===1}function Mo(e){return On(e,(t,n)=>t.NGetEnterAnim(n))}function Do(e){return(e.DynFlags&4)===4}function Fo(e){return On(e,(t,n)=>t.NGetChangeAnim(n))}function Lo(e,t){e.flags=t}function On(e,t){return We(St(n=>t(n,e.DynElem),e.DynNodes))}function Xr(e,t){lt(n=>{n.NSync(e)},t.DynNodes)}var wn=class extends Q{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}},yn=class extends Q{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}get AsChoiceView(){return Rn(this.fillWith)}};function hr(e,t){ce(e,t,null)}function Oo(e,t){let n=e.parentNode,r=globalThis.document.createTextNode("");return n.insertBefore(r,e),Gn(e,t),r}function Gn(e,t){ce(e.parentNode,t,e)}function Go(e,t,n){return hi(di(),qo(e,t,Zr(),n))}function Ro(e,t,n){return jr()?kt(()=>{let l=el(n),s=Jo(t,l),o=Bo(t,l);return vt(mr(li(s,Ho(t,l))),()=>vt(dr(e,t),()=>vt(mr(o),()=>(t.PreviousNodes=l,fe(null)))))}):dr(e,t)}function Wo(e,t,n){let r=el(n);ae(e,t.Top),t.PreviousNodes=r}function Po(){return{Text:globalThis.document.createTextNode(""),Dirty:!1,Value:""}}function Uo(e,t){e.Value=t,e.Dirty=!0}function ce(e,t,n){for(;;){if(t!=null&&t.$==1)return Ce(e,t.$0.El,n);if(t!=null&&t.$==2){let r=t.$0;r.Dirty=!1,t=r.Current}else{if(t==null)return n;if(t!=null&&t.$==4)return Ce(e,t.$0.Text,n);if(t!=null&&t.$==5)return Ce(e,t.$0,n);if(t!=null&&t.$==6)return Ln((r,l)=>(s=>o=>i=>o==null||o.constructor===Object?ce(s,o,i):Ce(s,o,i))(e)(r)(l),t.$0.Els,n);{let r=t.$1;t=t.$0,n=ce(e,r,n)}}}}function qo(e,t,n,r){let l=e.parentNode;Gn(t,r);let s=Jr(l,n);return qt.New(s,r,p([e,t]),l,re(),Lt(s.OnAfterRender))}function dr(e,t){if(tl()){let n=r=>{requestAnimationFrame(()=>{ae(e,t.Top),r()})};return Vn((r,l,s)=>n.apply(null,[r,l,s]))}else return ae(e,t.Top),fe(null)}function Ho(e,t){return We(St(n=>Vo(n.Attr),qn(nl(t,Un(n=>ko(n.Attr),e.PreviousNodes)))))}function Bo(e,t){return We(St(n=>Mo(n.Attr),qn(nl(e.PreviousNodes,Un(n=>Io(n.Attr),t)))))}function Jo(e,t){let n=l=>Do(l.Attr),r=l=>Un(n,l);return We(St(l=>Fo(l.Attr),qn(pi(r(e.PreviousNodes),r(t)))))}function ae(e,t){e||Ko(t),Qr(t.Children),Yr(t)}function Ce(e,t,n){return bo(e,n,t),t}function Ko(e){function t(n){function r(l){for(;;)if(l!=null&&l.$==0){let s=l.$1,o=l.$0;if(r(o))return!0;l=s}else if(l!=null&&l.$==2){let s=l.$0;if(s.Dirty)return!0;l=s.Current}else if(l!=null&&l.$==6){let s=l.$0;return s.Dirty||Ir(t,s.Holes)}else return!1}return r(n.Children)}Xr(e.El,e.Attr),t(e)&&zo(e)}function Qr(e){for(;;){if(e!=null&&e.$==1)return ae(!1,e.$0);if(e!=null&&e.$==2)e=e.$0.Current;else{if(e==null)return null;if(e!=null&&e.$==5)return null;if(e!=null&&e.$==4){let t=e.$0;return t.Dirty?(t.Text.nodeValue=t.Value,t.Dirty=!1):null}else if(e!=null&&e.$==6){let t=e.$0;return lt(n=>{ae(!1,n)},t.Holes),lt(n=>{Xr(n[0],n[1])},t.Attrs),Yr(t)}else{let t=e.$1,n=e.$0;Qr(n),e=t}}}}function Yr(e){let t=Lt(e.Render);t!=null&&t.$==1&&(t.$0(e.El),Ot(e,"Render",null))}function zo(e){let t=e.El;function n(o,i){for(;;){if(o!=null&&o.$==1)return o.$0.El;if(o!=null&&o.$==2){let u=o.$0;if(u.Dirty)return u.Dirty=!1,ce(t,u.Current,i);o=u.Current}else{if(o==null)return i;if(o!=null&&o.$==4)return o.$0.Text;if(o!=null&&o.$==5)return o.$0;if(o!=null&&o.$==6){let u=o.$0;return u.Dirty&&(u.Dirty=!1),Ln((d,w)=>d==null||d.constructor===Object?n(d,w):d,u.Els,i)}else{let u=o.$1;o=o.$0,i=n(u,i)}}}}let r=e.El;Qi(o=>{Ao(r,o)},Xi(Yi(e),Zi(e.El,Lt(e.Delimiters))));let l=e.Children,s=Lt(e.Delimiters);n(l,s!=null&&s.$==1?s.$0[1]:null)}var Cn=class extends Q{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}},Nn=class extends Q{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}};function Zo(e,t){return Ve(n=>{n.addEventListener(e,r=>t(n)(r),!1)})}function pr(e){return $t.A4(e)}function te(e,t){return zr(t,n=>r=>n.setAttribute(e,r))}function Xo(e){return Yt(Si(),e)}function Qo(e){return Yt(Ti(),e)}function Yo(e){return Yt(Ei(),e)}function jo(e){return Yt(_i(),e)}function ti(e){return Yt(ki(),e)}function ei(e){return Yt(Vi(),e)}function Yt(e,t){let n=e(t);return $t.Append(Ve(n[0]),ni(n[1],n[2]))}function ni(e,t){return zr(t,e)}var vn=class extends Q{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}},$t=class e{static Handler(t,n){return e.HandlerImpl(t,n)}static Concat(t){let n=Re(t);return Ge(Zr(),e.Append,n)}static Create(t,n){return Ve(r=>{r.setAttribute(t,n)})}static HandlerImpl(t,n){return Ve(r=>{r.addEventListener(t,l=>n(r)(l),!1)})}static Append(t,n){return _o(t,n)}static A4(t){return O(e,{$:4,$0:t})}static A3(t){return O(e,{$:3,$0:t})}static A1(t){return O(e,{$:1,$0:t})}static A2(t,n){return O(e,{$:2,$0:t,$1:n})}},bn=class extends Q{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}},An=class extends Q{name;fillWith;get Value(){return this.fillWith}get Name(){return this.name}};function Rn(e){return{$:0,$0:e}}function Ft(e){return{$:1,$0:e}}function Ge(e,t,n){let r=L(n);function l(s){return o=>{let i;switch(o<=0?0:o===1&&s>=0&&s<r?1:(i=o,2)){case 0:return e;case 1:return b(n,s);case 2:let u=o/2>>0;return t(l(s)(u),l(s+u)(o-u))}}}return l(0)(r)}function ri(e,t,n,r){let l=L(r);function s(o){return i=>{let u;switch(i<=0?0:i===1&&o>=0&&o<l?1:(u=i,2)){case 0:return t;case 1:return e(b(r,o));case 2:let d=i/2>>0;return n(s(o)(d),s(o+d)(i-d))}}}return s(0)(l)}function Re(e){if(e instanceof Array)return e;if(e instanceof W)return Fn(e);if(e===null)return[];{let t=[],n=V(e);try{for(;n.MoveNext();)t.push(n.Current);return t}finally{typeof n=="object"&&P(n)&&n.Dispose()}}}var xn=class e{c;s;v;static Create(t){let n;return n=null,n=e.New(t,null,()=>{let r;return r=n.s,r===null&&(r=Ds(n.c()),n.s=r,Lr(r,()=>{n.s=null})),r}),n}static New(t,n,r){return O(e,{c:t,s:n,v:r})}},Sn=class extends H{d;GetEnumerator(){return V(rt(t=>t.V,this.d))}constructor(t){super(),this.d=t}};function jr(){return mi()}function mr(e){return kt(()=>vt(si(()=>{},$i(e)),()=>(gi(e),fe(null))))}function li(e,t){return Wn(ol(e.$0,t.$0))}function si(e,t){let n=t.Duration;if(n===0)return tt();{let r=l=>{function s(o){return i=>{let u=i-o;return t.Compute(u),e(),u<=n?void requestAnimationFrame(d=>{s(o)(d)}):l()}}requestAnimationFrame(o=>{s(o)(o)})};return Vn((l,s,o)=>r.apply(null,[l,s,o]))}}function Wn(e){return{$:0,$0:e}}function We(e){return Wn(vi(rt(yi,e)))}function Je(){return Wn(ul())}function tl(){return ll.BatchUpdatesEnabled}function oi(e){let t=[0];function n(){return kt(()=>vt(e,()=>{let l=t[0];return N(l,1)?(t[0]=0,tt()):N(l,2)?(t[0]=1,n()):tt()}))}return()=>{let r=t[0];N(r,0)?(t[0]=1,br(n(),null)):N(r,1)&&(t[0]=2)}}function Ke(e){let t=[],n;for(var r in e)t.push.apply(t,e[r]);return t}var Pn=st(e=>class{static{Pn=e(this)}static counter;static{this.counter=0}});function ii(e){let t=At(rt(n=>_e.New(n[0],n[1]),Er(n=>n[0],ls(e))));return ps(t),Tn(t,0,t.length-1)}function ui(e,t){return ci((n,r)=>r,e,t)}function ci(e,t,n){let r=fi(t,n),l=r[0];return l==null?$r(r[1],et(t,null,null)):$r(r[1],et(e(l.Node,t),l.Left,l.Right))}function ai(e,t){function n(r,l){let s;for(;;){if(r==null)return l.$==1?p([l.$0[0],[l.$0[1],l.$1]]):null;e?(s=r,r=s.Right,l=W.Cons([s.Node,s.Left],l)):(s=r,r=s.Left,l=W.Cons([s.Node,s.Right],l))}}return is(r=>n(r[0],r[1]),[t,W.Empty])}function Tn(e,t,n){if(n-t+1<=0)return null;{let r=(t+n)/2>>0;return et(b(e,r),Tn(e,t,r-1),Tn(e,r+1,n))}}function fi(e,t){let n=[],r=t,l=!0;for(;l;)if(r==null)l=!1;else{let s=gt(e,r.Node);s===0?l=!1:s===1?(n.unshift([!0,r.Node,r.Left]),r=r.Right):(n.unshift([!1,r.Node,r.Right]),r=r.Left)}return[r,n]}function $r(e,t){let n=l=>l==null?0:l.Height,r=t;for(let l=0,s=L(e)-1;l<=s;l++){let o=b(e,l);if(o[0]){let i=o[1],u=o[2];if(n(r)>n(u)+1)if(n(r.Left)===n(r.Right)+1){let d=r.Left;r=et(d.Node,et(i,u,d.Left),et(r.Node,d.Right,r.Right))}else r=et(r.Node,et(i,u,r.Left),r.Right);else r=et(i,u,r)}else{let i=o[1],u=o[2];if(n(r)>n(u)+1)if(n(r.Right)===n(r.Left)+1){let d=r.Right;r=et(d.Node,et(r.Node,r.Left,d.Left),et(i,d.Right,u))}else r=et(r.Node,r.Left,et(i,r.Right,u));else r=et(i,r,u)}}return r}function et(e,t,n){let r=t==null?0:t.Height,l=n==null?0:n.Height,o=1+(gt(r,l)===1?r:l);return uo(e,t,n,o,1+(t==null?0:t.Count)+(n==null?0:n.Count))}function hi(e,t){return{PreviousNodes:e,Top:t}}function di(){return $e(new it("New_3"))}function el(e){let t=[];function n(s,o){for(;;)switch(s){case 0:if(o!=null&&o.$==0){let i=o.$1,u=o.$0;n(0,u),o=i}else if(o!=null&&o.$==1)o=o.$0,s=1;else if(o!=null&&o.$==2)o=o.$0.Current;else if(o!=null&&o.$==6){let i=o.$0.Holes;return(u=>d=>{lt(u,d)})(l)(i)}else return null;break;case 1:t.push(o),o=o.Children,s=0;break}}function r(s){return n(0,s)}function l(s){return n(1,s)}return r(e),$e(new it("New_2",t))}function $e(e){return{$:0,$0:e}}function Un(e,t){return $e(bi(e,t.$0))}function nl(e,t){return $e(Ai(e.$0,t.$0))}function qn(e){return zt(e.$0)}function pi(e,t){return $e(xi(e.$0,t.$0))}function mi(){return sl.UseAnimations}function $i(e){return wi(Dn(t=>t.$==1?p(t.$0):null,il(e.$0)))}function gi(e){lt(t=>{t.$==0&&t.$0()},il(e.$0))}function wi(e){let t=Re(e),n=L(t);if(n===0)return Ci();if(n===1)return b(t,0);{let r=us(rt(s=>s.Duration,t)),l=St(s=>Ni(r,s),t);return rl(r,s=>{lt(o=>{o.Compute(s)},l)})}}function yi(e){return e.$0}function Ci(e){return rl(0,()=>e)}function rl(e,t){return{Compute:t,Duration:e}}function Ni(e,t){let n=t.Compute,r=t.Duration,l=ru(()=>t.Compute(t.Duration));return{Compute:s=>s>=r?l.f():n(s),Duration:e}}var ll=st(e=>class{static{ll=e(this)}static BatchUpdatesEnabled;static{this.BatchUpdatesEnabled=!0}}),jt=st(e=>class{static{jt=e(this)}static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static{this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi"),this.rtagName=new RegExp("<([\\w:]+)"),this.rhtml=new RegExp("<|&#?\\w+;");let n=[1,"<table>","</table>"],r=Object.fromEntries([["option",[1,"<select multiple='multiple'>","</select>"]],["legend",[1,"<fieldset>","</fieldset>"]],["area",[1,"<map>","</map>"]],["param",[1,"<object>","</object>"]],["thead",n],["tbody",n],["tfoot",n],["tr",[2,"<table><tbody>","</tbody></table>"]],["col",[2,"<table><colgroup>","</colgoup></table>"]],["td",[3,"<table><tbody><tr>","</tr></tbody></table>"]]]);this.wrapMap=r,this.defaultWrap=[0,"",""]}}),En=class extends H{push;value;dirty;updates;get NChanged(){return this.updates}NGetExitAnim(t){return Je()}NGetEnterAnim(t){return Je()}NGetChangeAnim(t){return Je()}NSync(t){this.dirty&&(this.push(t)(this.value),this.dirty=!1)}constructor(t,n){super(),this.push=n,this.value=void 0,this.dirty=!1,this.updates=q(r=>{this.value=r,this.dirty=!0},t)}},sl=st(e=>class{static{sl=e(this)}static UseAnimations;static CubicInOut;static{this.CubicInOut=_n.Custom(n=>{let r=n*n;return 3*r-2*(r*n)}),this.UseAnimations=!0}});function ol(e,t){return e.$==0?t:t.$==0?e:{$:2,$0:e,$1:t}}function il(e){let t=[];function n(r){for(;;){if(r.$==1)return t.push(r.$0);if(r.$==2){let l=r.$1,s=r.$0;n(s),r=l}else return r.$==3?lt(l=>{t.push(l)},r.$0):null}}return n(e),t.slice(0)}function vi(e){let t=Re(e);return Ge(ul(),ol,t)}function ul(){return cl.Empty}var G=st(e=>class{static{G=e(this)}static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static{this.EmptyAttr=null,this.BoolCheckedApply=f=>[c=>{c.addEventListener("change",()=>f.Get()!=c.checked?f.Set(c.checked):null)},c=>a=>a!=null&&a.$==1?void(c.checked=a.$0):null,q(p,f.View)],this.StringSet=f=>c=>{f.value=c},this.StringGet=f=>p(f.value);let n=Mi(),r=Ii();this.StringApply=f=>Et(n,r,f),this.StringListSet=f=>c=>{let a=f.options;for(let h=0,$=a.length-1;h<=$;h++)(()=>{let y=a.item(h);y.selected=Eo(y.value,c)})()},this.StringListGet=f=>{let c=f.selectedOptions;return p(At(Dt(()=>Tr(a=>[c.item(a).value],le(0,c.length-1)))))};let l=Fi(),s=Di();this.StringListApply=f=>Et(l,s,f),this.DateTimeSetUnchecked=f=>c=>{f.value=new Date(c).toLocaleString()},this.DateTimeGetUnchecked=f=>{let c,a,h=f.value;if(ee(h))return p(-864e13);{c=0;let $=tu(h);return a=[$!=null&&$.$==1&&(c=$.$0,!0),c],a[0]?p(a[1]):null}};let o=Oi(),i=Li();this.DateTimeApplyUnchecked=f=>Et(o,i,f),this.FileSetUnchecked=()=>()=>null,this.FileGetUnchecked=f=>{let c=f.files;return p(At(Dt(()=>rt(a=>c.item(a),le(0,c.length-1)))))};let u=Wi(),d=Ri();this.FileApplyUnchecked=f=>Gi(u,d,f),this.IntSetUnchecked=f=>c=>{f.value=String(c)},this.IntGetUnchecked=f=>{let c=f.value;if(ee(c))return p(0);{let a=+c;return a!==a>>0?null:p(a)}};let w=Ui(),C=Pi();this.IntApplyUnchecked=f=>Et(w,C,f),this.IntSetChecked=f=>c=>{let a=c.Input;return f.value!=a?void(f.value=a):null},this.IntGetChecked=f=>{let c,a,h=f.value;if(ee(h))c=!f.checkValidity||f.checkValidity()?dt.Blank(h):dt.Invalid(h);else{let $=(a=0,[Bl(h,{get:()=>a,set:y=>{a=y}}),a]);c=$[0]?dt.Valid($[1],h):dt.Invalid(h)}return p(c)};let m=Hi(),g=qi();this.IntApplyChecked=f=>Et(m,g,f),this.FloatSetUnchecked=f=>c=>{f.value=String(c)},this.FloatGetUnchecked=f=>{let c=f.value;if(ee(c))return p(0);{let a=+c;return isNaN(a)?null:p(a)}};let S=Ji(),T=Bi();this.FloatApplyUnchecked=f=>Et(S,T,f),this.FloatSetChecked=f=>c=>{let a=c.Input;return f.value!=a?void(f.value=a):null},this.FloatGetChecked=f=>{let c,a=f.value;if(ee(a))c=!f.checkValidity||f.checkValidity()?dt.Blank(a):dt.Invalid(a);else{let h=+a;c=isNaN(h)?dt.Invalid(a):dt.Valid(h,a)}return p(c)};let _=zi(),E=Ki();this.FloatApplyChecked=f=>Et(_,E,f)}}),_n=class e extends H{transformTime;static Custom(t){return new e(t)}constructor(t){super(),this.transformTime=t}};function bi(e,t){return new it("New_2",he(e,zt(t)))}function Ai(e,t){let n=new it("New_2",zt(t));return n.ExceptWith(zt(e)),n}function zt(e){let t=Vr(e.Count,void 0);return e.CopyTo(t,0),t}function xi(e,t){let n=new it("New_2",zt(e));return n.IntersectWith(zt(t)),n}function Si(){return G.StringApply}function Ti(){return G.FloatApplyUnchecked}function Ei(){return G.BoolCheckedApply}function _i(){return G.DateTimeApplyUnchecked}function ki(){return G.FileApplyUnchecked}function Vi(){return G.StringListApply}function Et(e,t,n){let r;return r=null,[l=>{let s=()=>{n.UpdateMaybe(o=>{let i;return r=e(l),r!=null&&r.$==1&&!N(r.$0,o)&&(i=[r,r.$0],!0)?i[0]:null})};l.addEventListener("change",s),l.addEventListener("input",s),l.addEventListener("keypress",s)},l=>{let s=t(l);return o=>o==null?null:s(o.$0)},q(l=>{let s;return r!=null&&r.$==1&&N(r.$0,l)&&(s=r.$0,!0)?null:p(l)},n.View)]}function Ii(){return G.StringSet}function Mi(){return G.StringGet}function Di(){return G.StringListSet}function Fi(){return G.StringListGet}function Li(){return G.DateTimeSetUnchecked}function Oi(){return G.DateTimeGetUnchecked}function Gi(e,t,n){let r;return r=null,[l=>{l.addEventListener("change",()=>{n.UpdateMaybe(s=>{let o;return r=e(l),r!=null&&r.$==1&&r.$0!==s&&(o=[r,r.$0],!0)?o[0]:null})})},l=>{let s=t(l);return o=>o==null?null:s(o.$0)},q(l=>{let s;return r!=null&&r.$==1&&N(r.$0,l)&&(s=r.$0,!0)?null:p(l)},n.View)]}function Ri(){return G.FileSetUnchecked}function Wi(){return G.FileGetUnchecked}function Pi(){return G.IntSetUnchecked}function Ui(){return G.IntGetUnchecked}function qi(){return G.IntSetChecked}function Hi(){return G.IntGetChecked}function Bi(){return G.FloatSetUnchecked}function Ji(){return G.FloatGetUnchecked}function Ki(){return G.FloatSetChecked}function zi(){return G.FloatGetChecked}function ee(e){return Ys(ji,e)}var dt=class e{get Input(){return this.$==1?this.$0:this.$==2?this.$0:this.$1}static Blank(t){return O(e,{$:2,$0:t})}static Invalid(t){return O(e,{$:1,$0:t})}static Valid(t,n){return O(e,{$:0,$0:t,$1:n})}};function Zi(e,t){let n;if(t!=null&&t.$==1){let r=[];for(n=t.$0[0].nextSibling;n!==t.$0[1];)r.push(n),n=n.nextSibling;return Ie(r)}else{let r=e.childNodes.length,l=e.childNodes,s=ms(r,o=>l[o]);return Ie(s)}}function Xi(e,t){let n=e.$0;return Ie(he(r=>Mr(l=>r!==l,n),t.$0))}function Qi(e,t){lt(e,t.$0)}function Yi(e){let t=[];function n(r){for(;;)if(r!=null&&r.$==2)r=r.$0.Current;else{if(r!=null&&r.$==1)return t.push(r.$0.El);if(r==null)return null;if(r!=null&&r.$==5)return t.push(r.$0);if(r!=null&&r.$==4)return t.push(r.$0.Text);if(r!=null&&r.$==6){let l=r.$0.Els;return(s=>o=>{lt(s,o)})(s=>{s==null||s.constructor===Object?n(s):t.push(s)})(l)}else{let l=r.$1,s=r.$0;n(s),r=l}}}return n(e.Children),Ie(Re(t))}function Ie(e){return{$:0,$0:e}}function ji(e){return e.match(new RegExp("\\s"))!==null}function tu(e){let t=Date.parse(e);return isNaN(t)?null:p(t)}function eu(e,t,n,r){let l=+e,s=l===l-l%1&&l>=t&&l<=n;return s&&r.set(l),s}function nu(e){e.splice(0,L(e))}function ru(e){return ou(!1,e,lu)}function lu(){let e=this.v();return this.c=!0,this.v=e,this.f=su,e}function su(){return this.v}var cl=st(e=>class{static{cl=e(this)}static Empty;static{this.Empty={$:0}}});function ou(e,t,n){return{c:e,v:t,f:n}}return $l(iu);})();
